{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>Bienvenue dans la documentation du Backend MLOps du projet Weavestruct  projet MLOps. Cette documentation fournit une vue d'ensemble compl\u00e8te de la configuration, des services, et des meilleures pratiques pour g\u00e9rer et maintenir cette infrastructure Dockeris\u00e9e.</p>"},{"location":"#table-des-matieres","title":"Table des Mati\u00e8res","text":"<ul> <li>Pr\u00e9requis</li> <li>Structure du Projet</li> <li>Configuration</li> <li>Fichiers <code>.env</code></li> <li>R\u00e9seaux et Volumes Docker</li> <li>Services</li> <li>PostgreSQL</li> <li>MinIO</li> <li>MinIO Client</li> <li>Neo4j</li> <li>MLflow</li> <li>Label Studio</li> <li>Prometheus</li> <li>Grafana</li> <li>D\u00e9ploiement</li> <li>S\u00e9curit\u00e9</li> <li>Surveillance et Monitoring</li> <li>Sauvegardes</li> <li>D\u00e9pannage</li> <li>Contribution</li> <li>Licence</li> </ul>"},{"location":"backups/","title":"Sauvegardes","text":"<p>Il est essentiel de mettre en place des strat\u00e9gies de sauvegarde r\u00e9guli\u00e8res pour garantir la disponibilit\u00e9 des donn\u00e9es critiques. Cette section d\u00e9crit les m\u00e9thodes de sauvegarde et de restauration pour chaque service de votre backend Dockeris\u00e9.</p>"},{"location":"backups/#postgresql","title":"PostgreSQL","text":""},{"location":"backups/#sauvegarde","title":"Sauvegarde","text":"<p>Utilisez <code>pg_dump</code> pour effectuer des sauvegardes r\u00e9guli\u00e8res de la base de donn\u00e9es.</p>"},{"location":"backups/#commande-de-sauvegarde","title":"Commande de Sauvegarde","text":"<pre><code>docker exec -t postgre pg_dumpall -c -U your_username &gt; backup.sql\n</code></pre>"},{"location":"backups/#automatisation-avec-cron","title":"Automatisation avec Cron","text":"<p>Cr\u00e9ez une t\u00e2che cron pour automatiser les sauvegardes.</p> <ol> <li>\u00c9ditez la Crontab</li> </ol> <p><code>bash    crontab -e</code></p> <ol> <li>Ajoutez la T\u00e2che Cron</li> </ol> <p><code>cron    0 2 * * * docker exec -t postgre pg_dumpall -c -U your_username &gt; /path/to/backups/backup_$(date +\\%F).sql</code></p>"},{"location":"backups/#restauration","title":"Restauration","text":"<p>Pour restaurer une sauvegarde, utilisez la commande suivante :</p> <pre><code>docker exec -i postgre psql -U your_username -d your_database &lt; backup.sql\n</code></pre>"},{"location":"backups/#minio","title":"MinIO","text":""},{"location":"backups/#sauvegarde_1","title":"Sauvegarde","text":"<p>Activez la r\u00e9plication ou utilisez des outils comme <code>mc</code> (MinIO Client) pour synchroniser les donn\u00e9es vers un autre emplacement.</p>"},{"location":"backups/#utilisation-de-mc-pour-la-sauvegarde","title":"Utilisation de <code>mc</code> pour la Sauvegarde","text":"<pre><code>docker exec -it minio-client mc mirror minio/your-bucket /path/to/backup\n</code></pre>"},{"location":"backups/#restauration_1","title":"Restauration","text":"<p>Pour restaurer les donn\u00e9es, inversez la commande de synchronisation.</p> <pre><code>docker exec -it minio-client mc mirror /path/to/backup minio/your-bucket\n</code></pre>"},{"location":"backups/#neo4j","title":"Neo4j","text":""},{"location":"backups/#sauvegarde_2","title":"Sauvegarde","text":"<p>Utilisez les outils int\u00e9gr\u00e9s de Neo4j pour cr\u00e9er des snapshots r\u00e9guliers de la base de donn\u00e9es.</p>"},{"location":"backups/#commande-de-sauvegarde_1","title":"Commande de Sauvegarde","text":"<pre><code>docker exec -it neo4j bin/neo4j-admin dump --database=neo4j --to=/data/neo4j.dump\ndocker cp neo4j:/data/neo4j.dump ./backup/neo4j.dump\n</code></pre>"},{"location":"backups/#restauration_2","title":"Restauration","text":"<p>Pour restaurer une sauvegarde, utilisez la commande suivante :</p> <pre><code>docker exec -it neo4j bin/neo4j-admin load --database=neo4j --from=/data/neo4j.dump --force\n</code></pre>"},{"location":"backups/#mlflow","title":"MLflow","text":""},{"location":"backups/#sauvegarde_3","title":"Sauvegarde","text":"<p>Les artefacts MLflow sont stock\u00e9s dans MinIO. Utilisez le client MinIO pour sauvegarder les artefacts.</p>"},{"location":"backups/#commande-de-sauvegarde_2","title":"Commande de Sauvegarde","text":"<pre><code>docker exec -it minio-client mc mirror minio/mlflow/artifacts /path/to/backup\n</code></pre>"},{"location":"backups/#restauration_3","title":"Restauration","text":"<p>Pour restaurer les artefacts, utilisez la commande suivante :</p> <pre><code>docker exec -it minio-client mc mirror /path/to/backup minio/mlflow/artifacts\n</code></pre>"},{"location":"backups/#label-studio","title":"Label Studio","text":""},{"location":"backups/#sauvegarde_4","title":"Sauvegarde","text":"<p>Les donn\u00e9es Label Studio sont stock\u00e9es dans le volume <code>label-studio-data</code>. Sauvegardez ce volume r\u00e9guli\u00e8rement.</p>"},{"location":"backups/#commande-de-sauvegarde_3","title":"Commande de Sauvegarde","text":"<pre><code>docker run --rm \\\n  -v label-studio-data:/label-studio/data \\\n  -v $(pwd)/backup:/backup \\\n  alpine tar czf /backup/label-studio-data.tar.gz -C /label-studio/data .\n</code></pre>"},{"location":"backups/#restauration_4","title":"Restauration","text":"<p>Pour restaurer les donn\u00e9es, utilisez la commande suivante :</p> <pre><code>docker run --rm \\\n  -v label-studio-data:/label-studio/data \\\n  -v $(pwd)/backup:/backup \\\n  alpine tar xzf /backup/label-studio-data.tar.gz -C /label-studio/data\n</code></pre>"},{"location":"backups/#grafana","title":"Grafana","text":""},{"location":"backups/#sauvegarde_5","title":"Sauvegarde","text":"<p>Sauvegardez le volume <code>grafana-data</code> pour conserver les dashboards, les configurations et les plugins.</p>"},{"location":"backups/#commande-de-sauvegarde_4","title":"Commande de Sauvegarde","text":"<pre><code>docker run --rm \\\n  -v grafana-data:/var/lib/grafana \\\n  -v $(pwd)/backup:/backup \\\n  alpine tar czf /backup/grafana-data.tar.gz -C /var/lib/grafana .\n</code></pre>"},{"location":"backups/#restauration_5","title":"Restauration","text":"<p>Pour restaurer les donn\u00e9es, utilisez la commande suivante :</p> <pre><code>docker run --rm \\\n  -v grafana-data:/var/lib/grafana \\\n  -v $(pwd)/backup:/backup \\\n  alpine tar xzf /backup/grafana-data.tar.gz -C /var/lib/grafana\n</code></pre>"},{"location":"backups/#bonnes-pratiques-de-sauvegarde","title":"Bonnes Pratiques de Sauvegarde","text":"<ul> <li>Fr\u00e9quence : D\u00e9finissez une fr\u00e9quence de sauvegarde appropri\u00e9e (quotidienne, hebdomadaire) en fonction de la criticit\u00e9 des donn\u00e9es.</li> <li>Automatisation : Automatisez les sauvegardes en utilisant des scripts et des t\u00e2ches cron pour \u00e9viter les oublis.</li> <li>Stockage S\u00e9curis\u00e9 : Stockez les sauvegardes dans un emplacement s\u00e9curis\u00e9, id\u00e9alement hors site, pour prot\u00e9ger contre les pertes de donn\u00e9es locales.</li> <li>V\u00e9rification des Sauvegardes : Testez r\u00e9guli\u00e8rement les sauvegardes en effectuant des restaurations pour vous assurer de leur int\u00e9grit\u00e9.</li> <li>Rotation des Sauvegardes : Mettez en place une politique de r\u00e9tention pour supprimer les anciennes sauvegardes et \u00e9conomiser de l'espace de stockage.</li> </ul>"},{"location":"backups/#conclusion","title":"Conclusion","text":"<p>Une strat\u00e9gie de sauvegarde bien d\u00e9finie garantit la r\u00e9silience de votre infrastructure et la disponibilit\u00e9 continue des donn\u00e9es critiques. Assurez-vous de suivre les meilleures pratiques pour minimiser les risques de perte de donn\u00e9es.</p>"},{"location":"contribution/","title":"Contribution","text":"<p>Nous appr\u00e9cions vos contributions \u00e0 ce projet ! Suivez les \u00e9tapes ci-dessous pour contribuer de mani\u00e8re efficace et structur\u00e9e.</p>"},{"location":"contribution/#etapes-pour-contribuer","title":"\u00c9tapes pour Contribuer","text":""},{"location":"contribution/#1-fork-le-depot","title":"1. Fork le D\u00e9p\u00f4t","text":"<p>Cliquez sur le bouton \"Fork\" en haut de la page GitHub pour cr\u00e9er une copie de ce d\u00e9p\u00f4t dans votre compte.</p>"},{"location":"contribution/#2-cloner-votre-fork-localement","title":"2. Cloner votre Fork Localement","text":"<p>Clonez votre d\u00e9p\u00f4t fork\u00e9 sur votre machine locale.</p> <pre><code>git clone https://github.com/Artemis-IA/mlops_backend.git\ncd mlops_backend\n</code></pre>"},{"location":"contribution/#3-creer-une-branche-pour-votre-feature-ou-correction","title":"3. Cr\u00e9er une Branche pour votre Feature ou Correction","text":"<p>Cr\u00e9ez une nouvelle branche pour travailler sur votre feature ou correction.</p> <pre><code>git checkout -b nom-de-votre-branche\n</code></pre>"},{"location":"contribution/#4-effectuer-vos-changements-et-commit","title":"4. Effectuer vos Changements et Commit","text":"<p>Effectuez les modifications n\u00e9cessaires dans le code ou la documentation. Ajoutez et commitez vos changements.</p> <pre><code>git add .\ngit commit -m \"Description de vos changements\"\n</code></pre>"},{"location":"contribution/#5-pousser-la-branche-sur-github","title":"5. Pousser la Branche sur GitHub","text":"<p>Poussez votre branche locale vers votre fork sur GitHub.</p> <pre><code>git push origin nom-de-votre-branche\n</code></pre>"},{"location":"contribution/#6-creer-une-pull-request","title":"6. Cr\u00e9er une Pull Request","text":"<p>Allez sur votre d\u00e9p\u00f4t fork\u00e9 sur GitHub et cr\u00e9ez une Pull Request vers le d\u00e9p\u00f4t original.</p>"},{"location":"contribution/#checklist-pour-la-pull-request","title":"Checklist pour la Pull Request","text":"<ul> <li>[ ] Description Claire : D\u00e9crivez clairement les changements apport\u00e9s.</li> <li>[ ] Liens vers les Issues : Si votre PR r\u00e9sout une issue, mentionnez-la.</li> <li>[ ] Tests : Ajoutez des tests si n\u00e9cessaire pour v\u00e9rifier vos changements.</li> <li>[ ] Documentation : Mettez \u00e0 jour la documentation si vos changements affectent celle-ci.</li> </ul>"},{"location":"contribution/#bonnes-pratiques","title":"Bonnes Pratiques","text":"<ul> <li>Code Propre : Assurez-vous que votre code respecte les standards de codage du projet.</li> <li>Commits Significatifs : Faites des commits atomiques avec des messages clairs.</li> <li>Tester Localement : Testez vos changements localement avant de les pousser.</li> <li>Revue de Code : Soyez pr\u00eat \u00e0 recevoir des feedbacks et \u00e0 apporter des modifications si n\u00e9cessaire.</li> </ul>"},{"location":"contribution/#documentation","title":"Documentation","text":"<p>Si vous souhaitez am\u00e9liorer la documentation, suivez les m\u00eames \u00e9tapes pour cr\u00e9er une Pull Request avec vos modifications.</p>"},{"location":"contribution/#contact","title":"Contact","text":"<p>Si vous avez des questions ou avez besoin d'aide, n'h\u00e9sitez pas \u00e0 ouvrir une issue sur GitHub ou \u00e0 contacter les mainteneurs du projet.</p>"},{"location":"contribution/#greetings","title":"Greetings","text":"<p>Merci de votre int\u00e9r\u00eat et de votre contribution \u00e0 ce projet !</p>"},{"location":"deployment/","title":"D\u00e9ploiement","text":"<p>Pour d\u00e9ployer votre backend Dockeris\u00e9, suivez les \u00e9tapes d\u00e9taill\u00e9es ci-dessous. Cette section couvre le clonage du d\u00e9p\u00f4t, la configuration des variables d'environnement, la cr\u00e9ation du r\u00e9seau Docker, et le lancement des services avec Docker Compose.</p>"},{"location":"deployment/#etapes-de-deploiement","title":"\u00c9tapes de D\u00e9ploiement","text":""},{"location":"deployment/#1-cloner-le-depot","title":"1. Cloner le D\u00e9p\u00f4t","text":"<p>Commencez par cloner le d\u00e9p\u00f4t GitHub sur votre machine locale.</p> <pre><code>git clone https://github.com/Artemis-IA/mlops_backend.git\ncd mlops_backend\n</code></pre>"},{"location":"deployment/#2-configurer-les-variables-denvironnement","title":"2. Configurer les Variables d'Environnement","text":"<p>Copiez le fichier <code>.env.example</code> en <code>.env</code> et modifiez les valeurs selon vos besoins.</p> <pre><code>cp .env.example .env\n</code></pre> <p>Ouvrez le fichier <code>.env</code> avec votre \u00e9diteur pr\u00e9f\u00e9r\u00e9 et d\u00e9finissez les valeurs appropri\u00e9es pour chaque variable.</p>"},{"location":"deployment/#3-creer-le-reseau-docker","title":"3. Cr\u00e9er le R\u00e9seau Docker","text":"<p>Si le r\u00e9seau <code>shared-network</code> n'existe pas, cr\u00e9ez-le avec la commande suivante :</p> <pre><code>docker network create shared-network\n</code></pre>"},{"location":"deployment/#4-lancer-les-services-avec-docker-compose","title":"4. Lancer les Services avec Docker Compose","text":"<p>Utilisez Docker Compose pour construire les images et d\u00e9marrer les conteneurs.</p> <pre><code>docker-compose up -d\n</code></pre> <p>Cette commande construira les images Docker n\u00e9cessaires et d\u00e9marrera les conteneurs en arri\u00e8re-plan.</p>"},{"location":"deployment/#5-verifier-letat-des-services","title":"5. V\u00e9rifier l'\u00c9tat des Services","text":"<p>Assurez-vous que tous les services sont en cours d'ex\u00e9cution et fonctionnent correctement.</p> <pre><code>docker-compose ps\n</code></pre> <p>Vous devriez voir une liste de tous les services avec leur \u00e9tat actuel.</p>"},{"location":"deployment/#6-acceder-aux-interfaces-web","title":"6. Acc\u00e9der aux Interfaces Web","text":"<p>Une fois les services d\u00e9marr\u00e9s, acc\u00e9dez aux interfaces web via les URLs configur\u00e9es :</p> <ul> <li>PostgreSQL : Accessible via le port d\u00e9fini (par exemple, <code>5432</code>) pour les connexions internes.</li> <li>MinIO : https://minio.domaine.com</li> <li>Neo4j : https://neo4j.domaine.com</li> <li>MLflow : https://mlflow.domaine.com</li> <li>Label Studio : https://labelstudio.domaine.com</li> <li>Prometheus : https://prometheus.domaine.com</li> <li>Grafana : https://grafana.domaine.com</li> </ul>"},{"location":"deployment/#7-tester-les-services","title":"7. Tester les Services","text":"<p>Assurez-vous que chaque service fonctionne comme pr\u00e9vu en acc\u00e9dant \u00e0 leurs interfaces web et en v\u00e9rifiant les connexions.</p>"},{"location":"deployment/#8-gestion-des-logs","title":"8. Gestion des Logs","text":"<p>Pour visualiser les logs d'un service sp\u00e9cifique, utilisez la commande suivante :</p> <pre><code>docker-compose logs &lt;service_name&gt;\n</code></pre> <p>Par exemple, pour voir les logs de PostgreSQL :</p> <pre><code>docker-compose logs postgre\n</code></pre>"},{"location":"deployment/#9-arreter-les-services","title":"9. Arr\u00eater les Services","text":"<p>Pour arr\u00eater tous les services, utilisez :</p> <pre><code>docker-compose down\n</code></pre> <p>Si vous souhaitez \u00e9galement supprimer les volumes, ajoutez l'option <code>-v</code> :</p> <pre><code>docker-compose down -v\n</code></pre>"},{"location":"deployment/#10-mettre-a-jour-les-services","title":"10. Mettre \u00e0 Jour les Services","text":"<p>Pour mettre \u00e0 jour les services apr\u00e8s avoir modifi\u00e9 les configurations ou les Dockerfiles, reconstruisez les images et red\u00e9marrez les conteneurs.</p> <pre><code>docker-compose build\ndocker-compose up -d\n</code></pre>"},{"location":"deployment/#conseils-de-deploiement","title":"Conseils de D\u00e9ploiement","text":"<ul> <li>Automatisation : Utilisez des scripts CI/CD pour automatiser le d\u00e9ploiement et les mises \u00e0 jour.</li> <li>Surveillance : Configurez des alertes dans Prometheus et Grafana pour surveiller la sant\u00e9 des services.</li> <li>S\u00e9curit\u00e9 : Assurez-vous que toutes les connexions sont s\u00e9curis\u00e9es via HTTPS et que les mots de passe sont forts et bien g\u00e9r\u00e9s.</li> <li>Sauvegardes : Mettez en place des sauvegardes r\u00e9guli\u00e8res pour toutes les bases de donn\u00e9es et les volumes de donn\u00e9es critiques.</li> </ul>"},{"location":"license/","title":"MIT License","text":"<p>``` MIT License</p> <p>Copyright (c) 2024 Ibrahim Mohammad</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"monitoring/","title":"Surveillance et Monitoring","text":"<p>Avec Prometheus et Grafana, vous disposez d'une solution robuste pour surveiller les performances et la sant\u00e9 de vos services Dockeris\u00e9s. Cette section d\u00e9taille comment configurer et utiliser ces outils pour une surveillance efficace.</p>"},{"location":"monitoring/#prometheus","title":"Prometheus","text":""},{"location":"monitoring/#description","title":"Description","text":"<p>Prometheus collecte des m\u00e9triques \u00e0 partir des diff\u00e9rents services et les stocke pour une analyse ult\u00e9rieure.</p>"},{"location":"monitoring/#configuration","title":"Configuration","text":"<p>Le fichier de configuration <code>prometheus.yml</code> situ\u00e9 dans le r\u00e9pertoire <code>metrics</code> d\u00e9finit les cibles de surveillance.</p>"},{"location":"monitoring/#exemple-de-prometheusyml","title":"Exemple de <code>prometheus.yml</code>","text":"<pre><code>global:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: 'docker'\n    static_configs:\n      - targets: ['postgre:5432', 'minio:9000', 'neo4j:7474', 'mlflow:5000', 'label-studio:8080', 'grafana:3001']\n</code></pre>"},{"location":"monitoring/#collecte-des-metriques","title":"Collecte des M\u00e9triques","text":"<p>Assurez-vous que chaque service expose les m\u00e9triques n\u00e9cessaires via des endpoints compatibles avec Prometheus. Par exemple, PostgreSQL peut utiliser postgres_exporter, et Neo4j peut utiliser neo4j_exporter.</p>"},{"location":"monitoring/#installation-des-exporters","title":"Installation des Exporters","text":"<ol> <li>PostgreSQL Exporter</li> </ol> <p>Ajoutez le service <code>postgres_exporter</code> dans votre <code>docker-compose.yml</code>.</p> <p><code>yaml    postgres_exporter:      image: prometheuscommunity/postgres-exporter      environment:        - DATA_SOURCE_NAME=postgresql://your_username:your_password@postgre:5432/your_database?sslmode=disable      networks:        - shared-network      restart: always</code></p> <ol> <li>Neo4j Exporter</li> </ol> <p>Ajoutez le service <code>neo4j_exporter</code> dans votre <code>docker-compose.yml</code>.</p> <p><code>yaml    neo4j_exporter:      image: mercari/neo4j_exporter      environment:        - NEO4J_URI=bolt://neo4j:7687        - NEO4J_USER=neo4j        - NEO4J_PASSWORD=your_password      networks:        - shared-network      restart: always</code></p>"},{"location":"monitoring/#alertes","title":"Alertes","text":"<p>Configurez des alertes dans <code>alert_rules.yml</code> pour \u00eatre inform\u00e9 des anomalies ou des d\u00e9faillances.</p>"},{"location":"monitoring/#exemple-dalerte","title":"Exemple d'Alerte","text":"<pre><code>groups:\n  - name: example\n    rules:\n      - alert: HighCPUUsage\n        expr: process_cpu_seconds_total &gt; 0.8\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High CPU usage detected\"\n          description: \"CPU usage has been above 80% for more than 5 minutes.\"\n</code></pre>"},{"location":"monitoring/#visualisation-avec-grafana","title":"Visualisation avec Grafana","text":"<p>Configurez Grafana pour se connecter \u00e0 Prometheus en tant que source de donn\u00e9es et cr\u00e9ez des dashboards personnalis\u00e9s pour visualiser les m\u00e9triques collect\u00e9es.</p>"},{"location":"monitoring/#ajouter-une-source-de-donnees-dans-grafana","title":"Ajouter une Source de Donn\u00e9es dans Grafana","text":"<ol> <li>Naviguez vers : Configuration &gt; Data Sources.</li> <li>Ajoutez : Prometheus.</li> <li>Configurez l'URL : <code>http://prometheus:9090</code>.</li> <li>Enregistrez et Testez la connexion.</li> </ol>"},{"location":"monitoring/#creer-des-dashboards","title":"Cr\u00e9er des Dashboards","text":"<ol> <li>Importez des Dashboards Pr\u00e9d\u00e9finis : Utilisez des dashboards disponibles sur Grafana Dashboards.</li> <li>Cr\u00e9ez des Dashboards Personnalis\u00e9s : Ajoutez des panels sp\u00e9cifiques pour suivre les indicateurs cl\u00e9s de vos services.</li> </ol>"},{"location":"monitoring/#monitoring-des-services","title":"Monitoring des Services","text":"<p>Surveillez les services suivants :</p> <ul> <li>PostgreSQL : Suivez les connexions, la charge CPU, la m\u00e9moire utilis\u00e9e, etc.</li> <li>MinIO : Surveillez l'utilisation du stockage, le nombre de requ\u00eates, les erreurs.</li> <li>Neo4j : Suivez les transactions, la m\u00e9moire utilis\u00e9e, les performances des requ\u00eates.</li> <li>MLflow : Surveillez les exp\u00e9riences, les artefacts, les mod\u00e8les d\u00e9ploy\u00e9s.</li> <li>Label Studio : Surveillez les annotations, les utilisateurs actifs, les performances.</li> <li>Grafana : Surveillez l'utilisation des ressources, les plugins actifs, les dashboards.</li> <li>Prometheus : Surveillez l'\u00e9tat de la collecte des m\u00e9triques, la performance du serveur.</li> </ul>"},{"location":"monitoring/#bonnes-pratiques","title":"Bonnes Pratiques","text":"<ul> <li>D\u00e9finir des Seuils Appropri\u00e9s : Configurez des seuils r\u00e9alistes pour les alertes afin de r\u00e9duire les fausses alertes.</li> <li>Documenter les Dashboards : Ajoutez des descriptions aux dashboards pour faciliter leur compr\u00e9hension par les membres de l'\u00e9quipe.</li> <li>Automatiser les Alertes : Configurez des int\u00e9grations avec des outils de notification (comme Slack, PagerDuty) pour recevoir les alertes en temps r\u00e9el.</li> </ul>"},{"location":"monitoring/#conclusion","title":"Conclusion","text":"<p>Une configuration efficace de Prometheus et Grafana permet une surveillance proactive de votre infrastructure, assurant ainsi une disponibilit\u00e9 et une performance optimales de vos services Dockeris\u00e9s.</p>"},{"location":"prerequisites/","title":"Pr\u00e9requis","text":"<p>Avant de commencer, assurez-vous d'avoir les \u00e9l\u00e9ments suivants install\u00e9s sur votre machine :</p> <ul> <li>Docker (version 20.10 ou sup\u00e9rieure)</li> <li>Docker Compose (version 1.29 ou sup\u00e9rieure)</li> <li>Git (pour cloner le d\u00e9p\u00f4t)</li> <li>MkDocs (pour g\u00e9n\u00e9rer et visualiser la documentation)</li> </ul>"},{"location":"prerequisites/#installation-des-prerequis","title":"Installation des Pr\u00e9requis","text":""},{"location":"prerequisites/#docker","title":"Docker","text":"<p>T\u00e9l\u00e9chargez et installez Docker depuis docker.com.</p>"},{"location":"prerequisites/#docker-compose","title":"Docker Compose","text":"<p>Docker Compose est g\u00e9n\u00e9ralement inclus avec Docker Desktop. Pour v\u00e9rifier, ex\u00e9cutez :</p> <p>```bash docker-compose --version</p>"},{"location":"project_structure/","title":"Structure du Projet","text":""},{"location":"project_structure/#contenu-des-fichiers-markdown","title":"Contenu des Fichiers Markdown","text":""},{"location":"project_structure/#1-docsindexmd","title":"1. <code>docs/index.md</code>","text":""},{"location":"project_structure/#2-docsprerequisitesmd","title":"2. <code>docs/prerequisites.md</code>","text":"<pre><code># Pr\u00e9requis\n\nAvant de commencer, assurez-vous d'avoir les \u00e9l\u00e9ments suivants install\u00e9s sur votre machine :\n\n- **Docker** (version 20.10 ou sup\u00e9rieure)\n- **Docker Compose** (version 1.29 ou sup\u00e9rieure)\n- **Git** (pour cloner le d\u00e9p\u00f4t)\n- **MkDocs** (pour g\u00e9n\u00e9rer et visualiser la documentation)\n\n## Installation des Pr\u00e9requis\n\n### Docker\n\nT\u00e9l\u00e9chargez et installez Docker depuis [docker.com](https://www.docker.com/get-started).\n\n### Docker Compose\n\nDocker Compose est g\u00e9n\u00e9ralement inclus avec Docker Desktop. Pour v\u00e9rifier, ex\u00e9cutez :\n\n```bash\ndocker-compose --version\n</code></pre>"},{"location":"project_structure/#git","title":"Git","text":"<p>T\u00e9l\u00e9chargez et installez Git depuis git-scm.com.</p>"},{"location":"project_structure/#mkdocs","title":"MkDocs","text":"<p>Installez MkDocs et le th\u00e8me Material via <code>pip</code> :</p> <pre><code>pip install mkdocs mkdocs-material\n</code></pre> <p>V\u00e9rifiez l'installation avec :</p> <pre><code>mkdocs --version\n</code></pre> <p>```</p>"},{"location":"project_structure/#3-docsproject_structuremd","title":"3. <code>docs/project_structure.md</code>","text":"<p>```markdown</p>"},{"location":"security/","title":"S\u00e9curit\u00e9","text":"<p>La s\u00e9curit\u00e9 est une priorit\u00e9 dans votre configuration Dockeris\u00e9e. Voici quelques recommandations et meilleures pratiques pour renforcer la s\u00e9curit\u00e9 de votre infrastructure.</p>"},{"location":"security/#gestion-des-secrets","title":"Gestion des Secrets","text":""},{"location":"security/#utiliser-docker-secrets","title":"Utiliser Docker Secrets","text":"<p>Au lieu de stocker les informations sensibles dans des fichiers <code>.env</code>, utilisez Docker Secrets pour g\u00e9rer les secrets de mani\u00e8re s\u00e9curis\u00e9e.</p>"},{"location":"security/#exemple-de-configuration","title":"Exemple de Configuration","text":"<ol> <li>Cr\u00e9er un Secret</li> </ol> <p><code>bash    echo \"your_password\" | docker secret create postgre_password -</code></p> <ol> <li>Utiliser le Secret dans <code>docker-compose.yml</code></li> </ol> <p>```yaml    version: '3.7'</p> <p>services:      postgre:        image: postgres:14        secrets:          - postgre_password        environment:          - POSTGRES_PASSWORD_FILE=/run/secrets/postgre_password        ...</p> <p>secrets:      postgre_password:        external: true    ```</p>"},{"location":"security/#utiliser-hashicorp-vault","title":"Utiliser HashiCorp Vault","text":"<p>Pour une gestion avanc\u00e9e des secrets, envisagez d'utiliser des outils comme HashiCorp Vault.</p>"},{"location":"security/#certificats-tls","title":"Certificats TLS","text":""},{"location":"security/#configuration-de-traefik","title":"Configuration de Traefik","text":"<p>Assurez-vous que Traefik est correctement configur\u00e9 pour g\u00e9rer les certificats TLS via Cloudflare.</p>"},{"location":"security/#exemple-de-configuration-de-traefik","title":"Exemple de Configuration de Traefik","text":"<pre><code>labels:\n  - \"traefik.enable=true\"\n  - \"traefik.http.routers.service_name.rule=Host(`service.domaine.com`)\"\n  - \"traefik.http.routers.service_name.entrypoints=websecure\"\n  - \"traefik.http.routers.service_name.tls.certresolver=cloudflare\"\n  - \"traefik.http.routers.service_name.middlewares=authelia@docker,secureHeaders@docker\"\n</code></pre>"},{"location":"security/#renouvellement-automatique","title":"Renouvellement Automatique","text":"<p>Traefik g\u00e8re automatiquement le renouvellement des certificats TLS via Let's Encrypt ou Cloudflare. Assurez-vous que votre configuration permet le renouvellement automatique sans interruption de service.</p>"},{"location":"security/#mots-de-passe-forts","title":"Mots de Passe Forts","text":""},{"location":"security/#bonnes-pratiques","title":"Bonnes Pratiques","text":"<ul> <li>Complexit\u00e9 : Utilisez des mots de passe complexes avec un m\u00e9lange de lettres, chiffres et caract\u00e8res sp\u00e9ciaux.</li> <li>Longueur : Optez pour des mots de passe d'au moins 12 caract\u00e8res.</li> <li>Unicit\u00e9 : Utilisez des mots de passe uniques pour chaque service.</li> </ul>"},{"location":"security/#rotation-des-mots-de-passe","title":"Rotation des Mots de Passe","text":"<p>Mettez en place une politique de rotation des mots de passe pour r\u00e9duire les risques en cas de compromission.</p>"},{"location":"security/#mises-a-jour-regulieres","title":"Mises \u00e0 Jour R\u00e9guli\u00e8res","text":""},{"location":"security/#images-docker","title":"Images Docker","text":"<ul> <li>Mises \u00e0 Jour des Images : Gardez vos images Docker \u00e0 jour pour b\u00e9n\u00e9ficier des derni\u00e8res mises \u00e0 jour de s\u00e9curit\u00e9.</li> </ul> <p><code>bash   docker-compose pull   docker-compose up -d</code></p>"},{"location":"security/#systemes-dexploitation","title":"Syst\u00e8mes d'Exploitation","text":"<ul> <li>Patches de S\u00e9curit\u00e9 : Appliquez r\u00e9guli\u00e8rement les patches de s\u00e9curit\u00e9 sur les syst\u00e8mes d'exploitation h\u00f4tes.</li> </ul>"},{"location":"security/#pare-feu-et-reseaux","title":"Pare-feu et R\u00e9seaux","text":""},{"location":"security/#configuration-des-pare-feu","title":"Configuration des Pare-feu","text":"<ul> <li>Limiter l'Acc\u00e8s : Limitez l'acc\u00e8s aux ports critiques uniquement aux adresses IP n\u00e9cessaires.</li> <li>Configurer les R\u00e8gles : Utilisez des r\u00e8gles de pare-feu pour restreindre le trafic entrant et sortant.</li> </ul>"},{"location":"security/#reseaux-docker","title":"R\u00e9seaux Docker","text":"<ul> <li>Isolation des R\u00e9seaux : Utilisez des r\u00e9seaux Docker isol\u00e9s pour segmenter les services et limiter la port\u00e9e des attaques potentielles.</li> </ul>"},{"location":"security/#authentification-multi-facteur-mfa","title":"Authentification Multi-Facteur (MFA)","text":""},{"location":"security/#mise-en-uvre-de-mfa","title":"Mise en \u0152uvre de MFA","text":"<p>Si possible, impl\u00e9mentez une authentification multi-facteur pour les interfaces d'administration accessibles via le web (comme Grafana, Prometheus, etc.).</p>"},{"location":"security/#exemple-avec-authelia","title":"Exemple avec Authelia","text":"<p>Utilisez Authelia comme middleware pour ajouter une couche d'authentification MFA.</p> <pre><code>labels:\n  - \"traefik.http.routers.service_name.middlewares=authelia@docker,secureHeaders@docker\"\n</code></pre>"},{"location":"security/#avantages-de-mfa","title":"Avantages de MFA","text":"<ul> <li>S\u00e9curit\u00e9 Renforc\u00e9e : R\u00e9duit le risque de compromission des comptes.</li> <li>Protection des Donn\u00e9es Sensibles : Assure que seules les personnes autoris\u00e9es ont acc\u00e8s aux interfaces critiques.</li> </ul>"},{"location":"security/#securisation-des-fichiers-env","title":"S\u00e9curisation des Fichiers <code>.env</code>","text":""},{"location":"security/#bonnes-pratiques_1","title":"Bonnes Pratiques","text":"<ul> <li>Ne Pas Versionner : Ne versionnez pas les fichiers <code>.env</code> contenant des informations sensibles.</li> <li>Permissions : Restreignez les permissions des fichiers <code>.env</code> pour qu'ils ne soient accessibles qu'aux utilisateurs n\u00e9cessaires.</li> </ul> <p><code>bash   chmod 600 .env</code></p> <ul> <li>Utiliser des Outils de Gestion des Secrets : Envisagez d'utiliser des outils comme Docker Secrets ou HashiCorp Vault pour une gestion plus s\u00e9curis\u00e9e des informations sensibles.</li> </ul>"},{"location":"security/#audits-de-securite","title":"Audits de S\u00e9curit\u00e9","text":""},{"location":"security/#scans-de-vulnerabilites","title":"Scans de Vuln\u00e9rabilit\u00e9s","text":"<ul> <li>Outils de Scan : Utilisez des outils comme Clair, Trivy, ou Anchore pour scanner vos images Docker \u00e0 la recherche de vuln\u00e9rabilit\u00e9s.</li> </ul> <p><code>bash   trivy image your_image_name</code></p>"},{"location":"security/#audits-reguliers","title":"Audits R\u00e9guliers","text":"<ul> <li>Revue de Configuration : Effectuez r\u00e9guli\u00e8rement des revues de configuration pour identifier et corriger les failles de s\u00e9curit\u00e9 potentielles.</li> <li>Tests d'Intrusion : Effectuez des tests d'intrusion pour \u00e9valuer la r\u00e9sistance de votre infrastructure face aux attaques.</li> </ul>"},{"location":"security/#conclusion","title":"Conclusion","text":"<p>En suivant ces meilleures pratiques de s\u00e9curit\u00e9, vous pouvez renforcer la protection de votre infrastructure Dockeris\u00e9e et assurer la confidentialit\u00e9, l'int\u00e9grit\u00e9 et la disponibilit\u00e9 de vos donn\u00e9es et services.</p>"},{"location":"troubleshooting/","title":"D\u00e9pannage","text":"<p>Cette section couvre les probl\u00e8mes courants que vous pourriez rencontrer avec votre backend Dockeris\u00e9 et fournit des solutions pour les r\u00e9soudre.</p>"},{"location":"troubleshooting/#1-services-qui-ne-demarrent-pas","title":"1. Services qui ne d\u00e9marrent pas","text":""},{"location":"troubleshooting/#symptomes","title":"Sympt\u00f4mes","text":"<ul> <li>Le conteneur ne d\u00e9marre pas.</li> <li>Le service est en \u00e9tat <code>Exited</code>.</li> </ul>"},{"location":"troubleshooting/#solutions","title":"Solutions","text":""},{"location":"troubleshooting/#verifier-les-logs-du-conteneur","title":"V\u00e9rifier les Logs du Conteneur","text":"<p>Consultez les logs du conteneur pour identifier les erreurs sp\u00e9cifiques.</p> <pre><code>docker-compose logs &lt;service_name&gt;\n</code></pre> <p>Exemple :</p> <pre><code>docker-compose logs postgre\n</code></pre>"},{"location":"troubleshooting/#verifier-les-variables-denvironnement","title":"V\u00e9rifier les Variables d'Environnement","text":"<p>Assurez-vous que toutes les variables d'environnement n\u00e9cessaires sont correctement d\u00e9finies dans le fichier <code>.env</code>.</p>"},{"location":"troubleshooting/#verifier-les-dependances","title":"V\u00e9rifier les D\u00e9pendances","text":"<p>Assurez-vous que les services dont d\u00e9pend le conteneur sont en cours d'ex\u00e9cution.</p> <pre><code>depends_on:\n  - minio\n</code></pre>"},{"location":"troubleshooting/#2-problemes-de-connexion-entre-services","title":"2. Probl\u00e8mes de Connexion entre Services","text":""},{"location":"troubleshooting/#symptomes_1","title":"Sympt\u00f4mes","text":"<ul> <li>Les services ne peuvent pas se connecter entre eux.</li> <li>Erreurs de connexion dans les logs.</li> </ul>"},{"location":"troubleshooting/#solutions_1","title":"Solutions","text":""},{"location":"troubleshooting/#verifier-le-reseau-docker","title":"V\u00e9rifier le R\u00e9seau Docker","text":"<p>Assurez-vous que tous les services sont connect\u00e9s au m\u00eame r\u00e9seau Docker (<code>shared-network</code>).</p> <pre><code>docker network inspect shared-network\n</code></pre>"},{"location":"troubleshooting/#verifier-les-variables-denvironnement_1","title":"V\u00e9rifier les Variables d'Environnement","text":"<p>V\u00e9rifiez que les variables d'environnement pour les h\u00f4tes et les ports sont correctement d\u00e9finies.</p>"},{"location":"troubleshooting/#tester-la-connectivite","title":"Tester la Connectivit\u00e9","text":"<p>Utilisez des outils comme <code>ping</code> ou <code>telnet</code> \u00e0 l'int\u00e9rieur des conteneurs pour tester la connectivit\u00e9.</p> <pre><code>docker exec -it &lt;container_name&gt; ping &lt;service_name&gt;\ndocker exec -it &lt;container_name&gt; telnet &lt;service_name&gt; &lt;port&gt;\n</code></pre>"},{"location":"troubleshooting/#3-certificats-tls-invalides","title":"3. Certificats TLS Invalides","text":""},{"location":"troubleshooting/#symptomes_2","title":"Sympt\u00f4mes","text":"<ul> <li>Erreurs de certificat lors de l'acc\u00e8s aux services via HTTPS.</li> <li>Avertissements de navigateur concernant la s\u00e9curit\u00e9.</li> </ul>"},{"location":"troubleshooting/#solutions_2","title":"Solutions","text":""},{"location":"troubleshooting/#verifier-la-configuration-de-traefik","title":"V\u00e9rifier la Configuration de Traefik","text":"<p>Assurez-vous que Traefik est correctement configur\u00e9 pour g\u00e9rer les certificats TLS via Cloudflare.</p>"},{"location":"troubleshooting/#verifier-les-dns","title":"V\u00e9rifier les DNS","text":"<p>Assurez-vous que les sous-domaines utilis\u00e9s pointent correctement vers votre serveur Traefik.</p>"},{"location":"troubleshooting/#renouvellement-des-certificats","title":"Renouvellement des Certificats","text":"<p>Assurez-vous que les certificats TLS sont valides et renouvel\u00e9s automatiquement.</p> <pre><code>docker logs traefik\n</code></pre>"},{"location":"troubleshooting/#4-performance-degradee","title":"4. Performance D\u00e9grad\u00e9e","text":""},{"location":"troubleshooting/#symptomes_3","title":"Sympt\u00f4mes","text":"<ul> <li>Les services sont lents \u00e0 r\u00e9pondre.</li> <li>Haute utilisation des ressources (CPU, m\u00e9moire).</li> </ul>"},{"location":"troubleshooting/#solutions_3","title":"Solutions","text":""},{"location":"troubleshooting/#surveiller-les-ressources","title":"Surveiller les Ressources","text":"<p>Utilisez Grafana et Prometheus pour identifier les goulets d'\u00e9tranglement.</p>"},{"location":"troubleshooting/#optimiser-les-configurations-des-services","title":"Optimiser les Configurations des Services","text":"<p>Ajustez les configurations des services pour mieux utiliser les ressources disponibles.</p>"},{"location":"troubleshooting/#augmenter-les-ressources-allouees","title":"Augmenter les Ressources Allou\u00e9es","text":"<p>Allouez plus de CPU et de m\u00e9moire aux conteneurs si n\u00e9cessaire.</p> <pre><code>services:\n  postgre:\n    deploy:\n      resources:\n        limits:\n          cpus: '2.0'\n          memory: '4G'\n</code></pre>"},{"location":"troubleshooting/#5-problemes-de-reseau","title":"5. Probl\u00e8mes de R\u00e9seau","text":""},{"location":"troubleshooting/#symptomes_4","title":"Sympt\u00f4mes","text":"<ul> <li>Services ne peuvent pas \u00eatre atteints via les URLs configur\u00e9es.</li> <li>Erreurs de r\u00e9seau dans les logs.</li> </ul>"},{"location":"troubleshooting/#solutions_4","title":"Solutions","text":""},{"location":"troubleshooting/#verifier-la-configuration-des-labels-traefik","title":"V\u00e9rifier la Configuration des Labels Traefik","text":"<p>Assurez-vous que les labels Traefik sont correctement d\u00e9finis pour chaque service.</p> <pre><code>labels:\n  - \"traefik.enable=true\"\n  - \"traefik.http.routers.service_name.rule=Host(`service.mlops.bzh`)\"\n  - \"traefik.http.routers.service_name.entrypoints=websecure\"\n  - \"traefik.http.routers.service_name.tls.certresolver=cloudflare\"\n  - \"traefik.http.routers.service_name.middlewares=authelia@docker,secureHeaders@docker\"\n</code></pre>"},{"location":"troubleshooting/#redemarrer-traefik","title":"Red\u00e9marrer Traefik","text":"<p>Red\u00e9marrez le conteneur Traefik pour appliquer les modifications de configuration.</p> <pre><code>docker-compose restart traefik\n</code></pre>"},{"location":"troubleshooting/#verifier-les-regles-de-pare-feu","title":"V\u00e9rifier les R\u00e8gles de Pare-feu","text":"<p>Assurez-vous que les r\u00e8gles de pare-feu permettent le trafic sur les ports n\u00e9cessaires.</p>"},{"location":"troubleshooting/#6-erreurs-dans-les-scripts-dinitialisation","title":"6. Erreurs dans les Scripts d'Initialisation","text":""},{"location":"troubleshooting/#symptomes_5","title":"Sympt\u00f4mes","text":"<ul> <li>Les scripts d'initialisation ne s'ex\u00e9cutent pas correctement.</li> <li>Les services ne sont pas configur\u00e9s comme pr\u00e9vu.</li> </ul>"},{"location":"troubleshooting/#solutions_5","title":"Solutions","text":""},{"location":"troubleshooting/#verifier-les-permissions-des-scripts","title":"V\u00e9rifier les Permissions des Scripts","text":"<p>Assurez-vous que les scripts d'initialisation ont les permissions d'ex\u00e9cution.</p> <pre><code>chmod +x /path/to/script.sh\n</code></pre>"},{"location":"troubleshooting/#verifier-les-logs","title":"V\u00e9rifier les Logs","text":"<p>Consultez les logs des conteneurs pour identifier les erreurs sp\u00e9cifiques lors de l'ex\u00e9cution des scripts.</p> <pre><code>docker-compose logs &lt;service_name&gt;\n</code></pre>"},{"location":"troubleshooting/#tester-les-scripts-localement","title":"Tester les Scripts Localement","text":"<p>Ex\u00e9cutez les scripts manuellement \u00e0 l'int\u00e9rieur des conteneurs pour identifier les probl\u00e8mes.</p> <pre><code>docker exec -it &lt;service_name&gt; /bin/bash\n./script.sh\n</code></pre>"},{"location":"troubleshooting/#7-problemes-de-stockage-persistant","title":"7. Probl\u00e8mes de Stockage Persistant","text":""},{"location":"troubleshooting/#symptomes_6","title":"Sympt\u00f4mes","text":"<ul> <li>Les donn\u00e9es ne sont pas persist\u00e9es entre les red\u00e9marrages des conteneurs.</li> <li>Volumes Docker ne sont pas mont\u00e9s correctement.</li> </ul>"},{"location":"troubleshooting/#solutions_6","title":"Solutions","text":""},{"location":"troubleshooting/#verifier-les-montages-de-volumes","title":"V\u00e9rifier les Montages de Volumes","text":"<p>Assurez-vous que les volumes Docker sont correctement mont\u00e9s dans le fichier <code>docker-compose.yml</code>.</p> <pre><code>volumes:\n  postgre-data:\n    driver: local\n</code></pre>"},{"location":"troubleshooting/#verifier-les-permissions-des-volumes","title":"V\u00e9rifier les Permissions des Volumes","text":"<p>Assurez-vous que les permissions des r\u00e9pertoires mont\u00e9s permettent l'\u00e9criture par les conteneurs.</p> <pre><code>chmod -R 755 /path/to/volume\n</code></pre>"},{"location":"troubleshooting/#inspecter-les-volumes-docker","title":"Inspecter les Volumes Docker","text":"<p>V\u00e9rifiez l'\u00e9tat des volumes Docker.</p> <pre><code>docker volume inspect postgre-data\n</code></pre>"},{"location":"troubleshooting/#conclusion","title":"Conclusion","text":"<p>Le d\u00e9pannage efficace repose sur une identification pr\u00e9cise des sympt\u00f4mes et une approche syst\u00e9matique pour r\u00e9soudre les probl\u00e8mes.</p>"},{"location":"configuration/env_files/","title":"Fichiers <code>.env</code>","text":"<p>Le fichier <code>.env</code> contient les variables d'environnement n\u00e9cessaires \u00e0 la configuration des services Docker. Un exemple de fichier <code>.env</code> est fourni dans <code>.env.example</code>. Assurez-vous de copier ce fichier et de d\u00e9finir les valeurs appropri\u00e9es avant de lancer les services.</p>"},{"location":"configuration/env_files/#copier-le-fichier-env","title":"Copier le Fichier <code>.env</code>","text":"<pre><code>cp .env.example .env\n</code></pre>"},{"location":"configuration/env_files/#variables-denvironnement","title":"Variables d'Environnement","text":""},{"location":"configuration/env_files/#exemple-de-env","title":"Exemple de <code>.env</code>","text":"<pre><code># PostgreSQL\nPG_MAJOR=16\nPOSTGRE_USER=your_username\nPOSTGRE_PASSWORD=your_password\nPOSTGRE_DB=your_database\nPOSTGRE_PORT=5432\nPOSTGRE_HOST=postgre\n\n# MinIO\nMINIO_ROOT_USER=your_minio_user\nMINIO_ROOT_PASSWORD=your_minio_password\nMINIO_PORT=9000\nMINIO_CONSOLE_PORT=9001\nMINIO_API_URL=http://minio:9000\n\n# MLflow\nMLFLOW_BACKEND_STORE_URI=postgresql://your_username:your_password@postgre:5432/your_database\nMLFLOW_ARTIFACT_ROOT=s3://mlflow/artifacts\nMLFLOW_S3_ENDPOINT_URL=http://minio:9000\nAWS_ACCESS_KEY_ID=your_access_key\nAWS_SECRET_ACCESS_KEY=your_secret_key\nMLFLOW_PORT=5000\n\n# Label Studio\nLABEL_STUDIO_PORT=8080\nLABEL_STUDIO_BUCKET_ENDPOINT_URL=http://minio:9000\nLABEL_STUDIO_BUCKET_ACCESS_KEY=your_minio_user\nLABEL_STUDIO_BUCKET_SECRET_KEY=your_minio_password\nPOSTGRE_HOST=postgre\nPOSTGRE_PORT=5432\nPOSTGRE_USER=your_username\nPOSTGRE_PASSWORD=your_password\nPOSTGRE_DB=your_database\nDJANGO_CSRF_TRUSTED_ORIGINS=https://labelstudio.domaine.com\n\n# Neo4j\nNEO4J_AUTH=neo4j/your_password\n\n# Grafana\nGF_SECURITY_ADMIN_USER=admin\nGF_SECURITY_ADMIN_PASSWORD=admin_password  # Changez ceci pour des raisons de s\u00e9curit\u00e9\n\n# Traefik (si applicable)\n# Ajoutez ici vos variables Traefik si n\u00e9cessaire\n</code></pre>"},{"location":"configuration/env_files/#description-des-variables","title":"Description des Variables","text":"<ul> <li>PostgreSQL :</li> <li><code>PG_MAJOR</code> : Version majeure de PostgreSQL.</li> <li><code>POSTGRE_USER</code> : Nom d'utilisateur pour PostgreSQL.</li> <li><code>POSTGRE_PASSWORD</code> : Mot de passe pour PostgreSQL.</li> <li><code>POSTGRE_DB</code> : Nom de la base de donn\u00e9es.</li> <li> <p><code>POSTGRE_PORT</code> : Port sur lequel PostgreSQL \u00e9coute.</p> </li> <li> <p>MinIO :</p> </li> <li><code>MINIO_ROOT_USER</code> : Nom d'utilisateur pour MinIO.</li> <li><code>MINIO_ROOT_PASSWORD</code> : Mot de passe pour MinIO.</li> <li><code>MINIO_PORT</code> : Port principal de MinIO.</li> <li><code>MINIO_CONSOLE_PORT</code> : Port pour l'interface console de MinIO.</li> <li> <p><code>MINIO_API_URL</code> : URL de l'API MinIO.</p> </li> <li> <p>MLflow :</p> </li> <li><code>MLFLOW_BACKEND_STORE_URI</code> : URI du backend store pour MLflow (PostgreSQL).</li> <li><code>MLFLOW_ARTIFACT_ROOT</code> : Chemin racine pour les artefacts MLflow.</li> <li><code>MLFLOW_S3_ENDPOINT_URL</code> : URL de l'endpoint S3 compatible avec MinIO.</li> <li><code>AWS_ACCESS_KEY_ID</code> : ID de cl\u00e9 d'acc\u00e8s AWS pour MinIO.</li> <li><code>AWS_SECRET_ACCESS_KEY</code> : Cl\u00e9 d'acc\u00e8s secr\u00e8te AWS pour MinIO.</li> <li> <p><code>MLFLOW_PORT</code> : Port sur lequel MLflow \u00e9coute.</p> </li> <li> <p>Label Studio :</p> </li> <li><code>LABEL_STUDIO_PORT</code> : Port pour Label Studio.</li> <li><code>LABEL_STUDIO_BUCKET_ENDPOINT_URL</code> : URL de l'endpoint du bucket pour Label Studio.</li> <li><code>LABEL_STUDIO_BUCKET_ACCESS_KEY</code> : Cl\u00e9 d'acc\u00e8s pour le bucket.</li> <li><code>LABEL_STUDIO_BUCKET_SECRET_KEY</code> : Cl\u00e9 secr\u00e8te pour le bucket.</li> <li><code>POSTGRE_*</code> : Variables de connexion \u00e0 PostgreSQL.</li> <li> <p><code>DJANGO_CSRF_TRUSTED_ORIGINS</code> : Origines fiables pour CSRF dans Django.</p> </li> <li> <p>Neo4j :</p> </li> <li> <p><code>NEO4J_AUTH</code> : Informations d'authentification pour Neo4j.</p> </li> <li> <p>Grafana :</p> </li> <li><code>GF_SECURITY_ADMIN_USER</code> : Nom d'utilisateur admin pour Grafana.</li> <li><code>GF_SECURITY_ADMIN_PASSWORD</code> : Mot de passe admin pour Grafana (\u00e0 modifier).</li> </ul> <p>Assurez-vous de ne pas versionner votre fichier <code>.env</code> si vous utilisez un syst\u00e8me de contr\u00f4le de version comme Git, afin de prot\u00e9ger vos informations sensibles. ```</p>"},{"location":"configuration/networks_volumes/","title":"R\u00e9seaux et Volumes Docker","text":""},{"location":"configuration/networks_volumes/#reseaux","title":"R\u00e9seaux","text":"<p>Le projet utilise un r\u00e9seau Docker externe nomm\u00e9 <code>shared-network</code>. Cela permet aux diff\u00e9rents services de communiquer entre eux de mani\u00e8re isol\u00e9e.</p>"},{"location":"configuration/networks_volumes/#creation-du-reseau-docker","title":"Cr\u00e9ation du R\u00e9seau Docker","text":"<p>Avant de lancer les services, assurez-vous que le r\u00e9seau <code>shared-network</code> existe. Sinon, cr\u00e9ez-le avec la commande suivante :</p> <pre><code>docker network create shared-network\n</code></pre>"},{"location":"configuration/networks_volumes/#volumes","title":"Volumes","text":"<p>Des volumes Docker persistants sont d\u00e9finis pour conserver les donn\u00e9es des services entre les red\u00e9marrages des conteneurs. Voici la liste des volumes utilis\u00e9s :</p> <ul> <li><code>postgre-data</code></li> <li><code>minio-data</code></li> <li><code>label-studio-data</code></li> <li><code>gliner-data</code></li> <li><code>mlflow-data</code></li> <li><code>neo4j_data</code></li> <li><code>neo4j_logs</code></li> <li><code>grafana-data</code></li> </ul>"},{"location":"configuration/networks_volumes/#definition-des-volumes-dans-docker-composeyml","title":"D\u00e9finition des Volumes dans <code>docker-compose.yml</code>","text":"<pre><code>volumes:\n  postgre-data:\n  minio-data:\n  label-studio-data:\n  gliner-data:\n  mlflow-data:\n  neo4j_data:\n  neo4j_logs:\n  grafana-data:\n</code></pre>"},{"location":"configuration/networks_volumes/#description-des-volumes","title":"Description des Volumes","text":"<ul> <li>postgre-data : Stocke les donn\u00e9es de PostgreSQL.</li> <li>minio-data : Stocke les donn\u00e9es de MinIO.</li> <li>label-studio-data : Stocke les donn\u00e9es de Label Studio.</li> <li>gliner-data : (Si utilis\u00e9) Stocke les donn\u00e9es du service Gliner.</li> <li>mlflow-data : Stocke les donn\u00e9es de MLflow.</li> <li>neo4j_data : Stocke les donn\u00e9es de Neo4j.</li> <li>neo4j_logs : Stocke les logs de Neo4j.</li> <li>grafana-data : Stocke les donn\u00e9es de Grafana.</li> </ul>"},{"location":"configuration/networks_volumes/#gestion-des-volumes","title":"Gestion des Volumes","text":"<p>Les volumes permettent de persister les donn\u00e9es ind\u00e9pendamment du cycle de vie des conteneurs. Cela garantit que les donn\u00e9es ne sont pas perdues lors des mises \u00e0 jour ou des red\u00e9marrages des services.</p>"},{"location":"configuration/networks_volumes/#utilisation-des-reseaux-et-volumes","title":"Utilisation des R\u00e9seaux et Volumes","text":"<p>Chaque service dans le <code>docker-compose.yml</code> est connect\u00e9 au r\u00e9seau <code>shared-network</code> et utilise les volumes d\u00e9finis pour la persistance des donn\u00e9es. Par exemple, pour PostgreSQL :</p> <pre><code>postgre:\n  container_name: postgre\n  ...\n  volumes:\n    - postgre-data:/var/lib/postgresql/data\n  networks:\n    - shared-network\n</code></pre> <p>Assurez-vous que chaque service est correctement configur\u00e9 pour utiliser les volumes et les r\u00e9seaux d\u00e9finis, garantissant ainsi une communication fluide et une persistance des donn\u00e9es.</p>"},{"location":"services/grafana/","title":"Grafana","text":""},{"location":"services/grafana/#description","title":"Description","text":"<p>Grafana est utilis\u00e9 pour visualiser les m\u00e9triques collect\u00e9es par Prometheus et autres sources de donn\u00e9es. Il permet de cr\u00e9er des dashboards personnalis\u00e9s pour surveiller les performances et la sant\u00e9 de vos services.</p>"},{"location":"services/grafana/#configuration","title":"Configuration","text":""},{"location":"services/grafana/#definition-du-service-dans-docker-composeyml","title":"D\u00e9finition du Service dans <code>docker-compose.yml</code>","text":"<pre><code>grafana:\n  image: grafana/grafana:latest\n  container_name: grafana\n  environment:\n    - GF_SECURITY_ADMIN_USER=admin\n    - GF_SECURITY_ADMIN_PASSWORD=admin_password  # Changez ceci pour des raisons de s\u00e9curit\u00e9\n  ports:\n    - \"3001:3001\"\n  volumes:\n    - grafana-data:/var/lib/grafana\n  networks:\n    - shared-network\n  restart: always\n  labels:\n    - \"traefik.enable=true\"\n    - \"traefik.http.routers.grafana.rule=Host(`grafana.domaine.com`)\"\n    - \"traefik.http.routers.grafana.entrypoints=websecure\"\n    - \"traefik.http.routers.grafana.tls.certresolver=cloudflare\"\n    - \"traefik.http.routers.grafana.middlewares=authelia@docker,secureHeaders@docker\"\n</code></pre>"},{"location":"services/grafana/#points-cles","title":"Points Cl\u00e9s","text":"<ul> <li>Interface Web : Accessible via <code>grafana.domaine.com</code>.</li> <li>S\u00e9curit\u00e9 : Les identifiants par d\u00e9faut doivent \u00eatre chang\u00e9s pour des raisons de s\u00e9curit\u00e9.</li> <li>Volumes : Les donn\u00e9es sont persist\u00e9es dans <code>grafana-data</code>.</li> </ul>"},{"location":"services/grafana/#dockerfile","title":"Dockerfile","text":"<p>Le <code>Dockerfile</code> dans le r\u00e9pertoire <code>grafana</code> (si personnalis\u00e9) peut \u00eatre configur\u00e9 pour installer des plugins ou des dashboards sp\u00e9cifiques. Cependant, l'exemple ci-dessus utilise l'image officielle de Grafana sans modifications.</p>"},{"location":"services/grafana/#utilisation","title":"Utilisation","text":"<ol> <li>Construction de l'Image Docker</li> </ol> <p><code>bash    docker-compose build grafana</code></p> <ol> <li>D\u00e9marrage du Service</li> </ol> <p><code>bash    docker-compose up -d grafana</code></p> <ol> <li>Acc\u00e9der \u00e0 l'Interface Web</li> </ol> <p>Ouvrez votre navigateur et naviguez vers https://grafana.domaine.com. Connectez-vous avec les identifiants d\u00e9finis dans le fichier <code>.env</code>.</p>"},{"location":"services/grafana/#securite","title":"S\u00e9curit\u00e9","text":"<ul> <li>Mots de Passe Forts : Changez le mot de passe admin par d\u00e9faut (<code>admin_password</code>) pour un mot de passe s\u00e9curis\u00e9.</li> <li>Acc\u00e8s Restreint : Limitez l'acc\u00e8s \u00e0 Grafana uniquement aux utilisateurs autoris\u00e9s via le r\u00e9seau Docker.</li> <li>HTTPS : Assurez-vous que l'acc\u00e8s \u00e0 Grafana se fait via HTTPS pour s\u00e9curiser les communications.</li> </ul>"},{"location":"services/grafana/#sauvegarde-et-restauration","title":"Sauvegarde et Restauration","text":""},{"location":"services/grafana/#sauvegarde","title":"Sauvegarde","text":"<p>Sauvegardez le volume <code>grafana-data</code> pour conserver les dashboards, les configurations et les plugins.</p> <pre><code>docker run --rm \\\n  -v grafana-data:/var/lib/grafana \\\n  -v $(pwd)/backup:/backup \\\n  alpine tar czf /backup/grafana-data.tar.gz -C /var/lib/grafana .\n</code></pre>"},{"location":"services/grafana/#restauration","title":"Restauration","text":"<p>Pour restaurer les donn\u00e9es, utilisez la commande suivante :</p> <pre><code>docker run --rm \\\n  -v grafana-data:/var/lib/grafana \\\n  -v $(pwd)/backup:/backup \\\n  alpine tar xzf /backup/grafana-data.tar.gz -C /var/lib/grafana\n</code></pre>"},{"location":"services/grafana/#monitoring","title":"Monitoring","text":"<p>Configurez Grafana pour se connecter \u00e0 Prometheus en tant que source de donn\u00e9es :</p> <ol> <li>Ajouter une Source de Donn\u00e9es</li> <li>Naviguez vers Configuration &gt; Data Sources.</li> <li> <p>Ajoutez Prometheus avec l'URL <code>http://prometheus:9090</code>.</p> </li> <li> <p>Importer des Dashboards</p> </li> <li>Utilisez des dashboards pr\u00e9d\u00e9finis ou cr\u00e9ez des dashboards personnalis\u00e9s pour visualiser les m\u00e9triques de vos services.</li> </ol>"},{"location":"services/grafana/#alertes","title":"Alertes","text":"<p>Configurez des alertes dans Grafana pour \u00eatre inform\u00e9 des anomalies d\u00e9tect\u00e9es par Prometheus.</p>"},{"location":"services/grafana/#exemple-de-configuration-dalerte","title":"Exemple de Configuration d'Alerte","text":"<ol> <li>Cr\u00e9er un Dashboard</li> <li>Ajouter un Panel</li> <li>Configurer les Alertes dans le Panel</li> </ol> <p>```</p>"},{"location":"services/label_studio/","title":"Label Studio","text":""},{"location":"services/label_studio/#description","title":"Description","text":"<p>Label Studio est utilis\u00e9 pour l'annotation de donn\u00e9es, facilitant la cr\u00e9ation de datasets pour l'entra\u00eenement des mod\u00e8les de machine learning.</p>"},{"location":"services/label_studio/#configuration","title":"Configuration","text":""},{"location":"services/label_studio/#definition-du-service-dans-docker-composeyml","title":"D\u00e9finition du Service dans <code>docker-compose.yml</code>","text":"<pre><code>label-studio:\n  container_name: label-studio\n  build:\n    context: ./label-studio\n    dockerfile: Dockerfile\n  env_file:\n    - .env\n  environment:\n    - LABEL_STUDIO_PORT=${LABEL_STUDIO_PORT}\n    - LABEL_STUDIO_BUCKET_ENDPOINT_URL=${LABEL_STUDIO_BUCKET_ENDPOINT_URL}\n    - LABEL_STUDIO_BUCKET_ACCESS_KEY=${LABEL_STUDIO_BUCKET_ACCESS_KEY}\n    - LABEL_STUDIO_BUCKET_SECRET_KEY=${LABEL_STUDIO_BUCKET_SECRET_KEY}\n    - LABEL_STUDIO_ROOT_URL=/labelstudio/\n    - DJANGO_CSRF_TRUSTED_ORIGINS=https://labelstudio.domaine.com\n    - CSRF_COOKIE_SECURE=1\n    - POSTGRE_HOST=${POSTGRE_HOST}\n    - POSTGRE_PORT=${POSTGRE_PORT}\n    - POSTGRE_USER=${POSTGRE_USER}\n    - POSTGRE_PASSWORD=${POSTGRE_PASSWORD}\n    - POSTGRE_DB=${POSTGRE_DB}\n  ports:\n    - \"${LABEL_STUDIO_PORT}:${LABEL_STUDIO_PORT}\"\n  extra_hosts:\n    - \"host.docker.internal:host-gateway\"\n  volumes:\n    - label-studio-data:/label-studio/data\n    - ./label-studio/create_bucket.py:/label-studio/create_bucket.py\n    - ./label-studio/cors.json:/label-studio/cors.json\n  labels:\n    - \"traefik.enable=true\"\n    - \"traefik.http.routers.labelstudio.rule=Host(`labelstudio.domaine.com`)\"\n    - \"traefik.http.routers.labelstudio.entrypoints=websecure\"\n    - \"traefik.http.routers.labelstudio.tls.certresolver=cloudflare\"\n    - \"traefik.http.routers.labelstudio.middlewares=authelia@docker,secureHeaders@docker\"\n  networks:\n    - shared-network\n  restart: always\n</code></pre>"},{"location":"services/label_studio/#points-cles","title":"Points Cl\u00e9s","text":"<ul> <li>Interface Web : Accessible via <code>labelstudio.domaine.com</code>.</li> <li>Int\u00e9gration avec MinIO : Utilise MinIO pour le stockage des artefacts.</li> <li>S\u00e9curit\u00e9 : Configuration des en-t\u00eates CSRF s\u00e9curis\u00e9s et utilisation de Traefik pour TLS.</li> <li>Volumes : Les donn\u00e9es et scripts sont persist\u00e9s dans <code>label-studio-data</code> et mont\u00e9s depuis le r\u00e9pertoire local.</li> </ul>"},{"location":"services/label_studio/#dockerfile","title":"Dockerfile","text":"<p>Le <code>Dockerfile</code> dans le r\u00e9pertoire <code>label-studio</code> configure l'image Label Studio.</p>"},{"location":"services/label_studio/#exemple-de-dockerfile","title":"Exemple de Dockerfile","text":"<pre><code>FROM python:3.9-slim\n\n# Installer les d\u00e9pendances\nRUN apt-get update &amp;&amp; \\\n    apt-get install -y build-essential &amp;&amp; \\\n    pip install --no-cache-dir label-studio\n\n# Copier les scripts et configurations\nCOPY entrypoint.sh /app/entrypoint.sh\nCOPY create_bucket.py /app/create_bucket.py\nCOPY cors.json /app/cors.json\n\n# D\u00e9finir le r\u00e9pertoire de travail\nWORKDIR /app\n\n# Entrypoint\nRUN chmod +x /app/entrypoint.sh\nENTRYPOINT [\"/app/entrypoint.sh\"]\n</code></pre>"},{"location":"services/label_studio/#exemple-de-entrypointsh","title":"Exemple de <code>entrypoint.sh</code>","text":"<pre><code>#!/bin/bash\nset -e\n\n# Cr\u00e9er le bucket S3 si n\u00e9cessaire\npython create_bucket.py\n\n# Lancer Label Studio\nlabel-studio start /label-studio/data --host 0.0.0.0 --port ${LABEL_STUDIO_PORT} --export-annotations\n</code></pre>"},{"location":"services/label_studio/#exemple-de-create_bucketpy","title":"Exemple de <code>create_bucket.py</code>","text":"<pre><code>import os\nfrom minio import Minio\nfrom minio.error import S3Error\n\ndef create_bucket():\n    minio_endpoint = os.getenv('LABEL_STUDIO_BUCKET_ENDPOINT_URL')\n    access_key = os.getenv('LABEL_STUDIO_BUCKET_ACCESS_KEY')\n    secret_key = os.getenv('LABEL_STUDIO_BUCKET_SECRET_KEY')\n\n    client = Minio(\n        minio_endpoint,\n        access_key=access_key,\n        secret_key=secret_key,\n        secure=False\n    )\n\n    bucket_name = \"labelstudio\"\n\n    if not client.bucket_exists(bucket_name):\n        client.make_bucket(bucket_name)\n        print(f\"Bucket '{bucket_name}' cr\u00e9\u00e9 avec succ\u00e8s.\")\n    else:\n        print(f\"Bucket '{bucket_name}' existe d\u00e9j\u00e0.\")\n\nif __name__ == \"__main__\":\n    try:\n        create_bucket()\n    except S3Error as e:\n        print(f\"Erreur lors de la cr\u00e9ation du bucket : {e}\")\n</code></pre>"},{"location":"services/label_studio/#utilisation","title":"Utilisation","text":"<ol> <li>Construction de l'Image Docker</li> </ol> <p><code>bash    docker-compose build label-studio</code></p> <ol> <li>D\u00e9marrage du Service</li> </ol> <p><code>bash    docker-compose up -d label-studio</code></p> <ol> <li>Acc\u00e9der \u00e0 l'Interface Web</li> </ol> <p>Ouvrez votre navigateur et naviguez vers https://labelstudio.domaine.com.</p>"},{"location":"services/label_studio/#securite","title":"S\u00e9curit\u00e9","text":"<ul> <li>Mots de Passe Forts : Utilisez des mots de passe complexes pour les acc\u00e8s MinIO.</li> <li>CSRF Protection : Configuration des en-t\u00eates CSRF s\u00e9curis\u00e9s pour prot\u00e9ger contre les attaques CSRF.</li> <li>Chiffrement : Activez le chiffrement des donn\u00e9es au repos et en transit si n\u00e9cessaire.</li> </ul>"},{"location":"services/label_studio/#sauvegarde-et-restauration","title":"Sauvegarde et Restauration","text":""},{"location":"services/label_studio/#sauvegarde","title":"Sauvegarde","text":"<p>Les donn\u00e9es Label Studio sont stock\u00e9es dans le volume <code>label-studio-data</code>. Sauvegardez ce volume r\u00e9guli\u00e8rement.</p> <pre><code>docker run --rm \\\n  -v label-studio-data:/data \\\n  -v $(pwd)/backup:/backup \\\n  alpine tar czf /backup/label-studio-data.tar.gz /data\n</code></pre>"},{"location":"services/label_studio/#restauration","title":"Restauration","text":"<p>Pour restaurer les donn\u00e9es, utilisez la commande suivante :</p> <pre><code>docker run --rm \\\n  -v label-studio-data:/data \\\n  -v $(pwd)/backup:/backup \\\n  alpine tar xzf /backup/label-studio-data.tar.gz -C /data\n</code></pre>"},{"location":"services/label_studio/#monitoring","title":"Monitoring","text":"<p>Int\u00e9grez Label Studio avec Prometheus pour surveiller les m\u00e9triques de l'application. Configurez les exporters n\u00e9cessaires dans <code>prometheus.yml</code>.</p>"},{"location":"services/minio/","title":"MinIO","text":""},{"location":"services/minio/#description","title":"Description","text":"<p>MinIO est utilis\u00e9 comme solution de stockage objet compatible avec S3, permettant de stocker les artefacts et autres fichiers.</p>"},{"location":"services/minio/#configuration","title":"Configuration","text":""},{"location":"services/minio/#definition-du-service-dans-docker-composeyml","title":"D\u00e9finition du Service dans <code>docker-compose.yml</code>","text":"<pre><code>minio:\n  container_name: minio\n  image: minio/minio:latest\n  env_file:\n    - .env\n  environment:\n    - MINIO_ROOT_USER=${MINIO_ROOT_USER}\n    - MINIO_ROOT_PASSWORD=${MINIO_ROOT_PASSWORD}\n    - MINIO_PORT=${MINIO_PORT}\n    - MINIO_CONSOLE_PORT=${MINIO_CONSOLE_PORT}\n    - MINIO_SERVER_URL=http://minio:${MINIO_PORT}\n  command: server --address :${MINIO_PORT} --console-address :${MINIO_CONSOLE_PORT} /data\n  ports:\n    - \"${MINIO_PORT}:${MINIO_PORT}\"\n    - \"${MINIO_CONSOLE_PORT}:${MINIO_CONSOLE_PORT}\"\n  volumes:\n    - minio-data:/data\n  labels:\n    - \"traefik.enable=true\"\n    - \"traefik.http.routers.minio.rule=Host(`minio.domaine.com`)\"\n    - \"traefik.http.routers.minio.entrypoints=websecure\"\n    - \"traefik.http.routers.minio.tls.certresolver=cloudflare\"\n    - \"traefik.http.routers.minio.middlewares=authelia@docker,secureHeaders@docker\"\n  networks:\n    - shared-network\n  restart: always\n</code></pre>"},{"location":"services/minio/#points-cles","title":"Points Cl\u00e9s","text":"<ul> <li>Interface Web : Accessible via <code>minio.domaine.com</code>.</li> <li>S\u00e9curit\u00e9 : Utilisation de Traefik pour g\u00e9rer les certificats TLS via Cloudflare et des middlewares pour l'authentification et les en-t\u00eates s\u00e9curis\u00e9s.</li> <li>Volumes : Les donn\u00e9es sont persist\u00e9es dans <code>minio-data</code>.</li> </ul>"},{"location":"services/minio/#utilisation","title":"Utilisation","text":"<p>Pour interagir avec MinIO, vous pouvez utiliser le client MinIO ou des outils compatibles S3.</p>"},{"location":"services/minio/#acceder-a-linterface-web","title":"Acc\u00e9der \u00e0 l'Interface Web","text":"<p>Ouvrez votre navigateur et naviguez vers https://minio.domaine.com. Connectez-vous avec les identifiants d\u00e9finis dans le fichier <code>.env</code>.</p>"},{"location":"services/minio/#utiliser-le-client-minio","title":"Utiliser le Client MinIO","text":"<p>Le service <code>minio-client</code> est configur\u00e9 pour interagir avec MinIO. Vous pouvez ex\u00e9cuter des commandes via ce conteneur pour g\u00e9rer vos buckets et objets.</p>"},{"location":"services/minio/#securite","title":"S\u00e9curit\u00e9","text":"<ul> <li>Mots de Passe Forts : Utilisez des mots de passe complexes pour <code>MINIO_ROOT_USER</code> et <code>MINIO_ROOT_PASSWORD</code>.</li> <li>Chiffrement : Activez le chiffrement des donn\u00e9es au repos et en transit si n\u00e9cessaire.</li> <li>Contr\u00f4le d'Acc\u00e8s : Configurez des politiques d'acc\u00e8s pour limiter les permissions aux utilisateurs et services.</li> </ul>"},{"location":"services/minio/#sauvegarde-et-restauration","title":"Sauvegarde et Restauration","text":""},{"location":"services/minio/#sauvegarde","title":"Sauvegarde","text":"<p>Utilisez <code>mc</code> (MinIO Client) pour synchroniser les donn\u00e9es vers un autre emplacement.</p> <pre><code>docker exec -it minio-client mc mirror minio/your-bucket /path/to/backup\n</code></pre>"},{"location":"services/minio/#restauration","title":"Restauration","text":"<p>Pour restaurer les donn\u00e9es, inversez la commande de synchronisation.</p> <pre><code>docker exec -it minio-client mc mirror /path/to/backup minio/your-bucket\n</code></pre>"},{"location":"services/minio/#monitoring","title":"Monitoring","text":"<p>Int\u00e9grez MinIO avec Prometheus pour surveiller les m\u00e9triques de stockage. Configurez les exporters n\u00e9cessaires dans <code>prometheus.yml</code>.</p>"},{"location":"services/minio_client/","title":"MinIO Client","text":""},{"location":"services/minio_client/#description","title":"Description","text":"<p>Le client MinIO est utilis\u00e9 pour interagir avec le serveur MinIO, notamment pour le t\u00e9l\u00e9chargement de buckets et la gestion des objets.</p>"},{"location":"services/minio_client/#configuration","title":"Configuration","text":""},{"location":"services/minio_client/#definition-du-service-dans-docker-composeyml","title":"D\u00e9finition du Service dans <code>docker-compose.yml</code>","text":"<pre><code>minio-client:\n  container_name: minio-client\n  build:\n    context: ./minio-client\n    dockerfile: Dockerfile\n  env_file:\n    - .env\n  environment:\n    - MINIO_ENDPOINT=${MINIO_API_URL}\n    - MINIO_ROOT_USER=${MINIO_ROOT_USER}\n    - MINIO_ROOT_PASSWORD=${MINIO_ROOT_PASSWORD}\n  ports:\n    - \"${MINIO_CLIENT_PORT}:${MINIO_CLIENT_PORT}\"\n  volumes:\n    - ./label-studio/cors.json:/label-studio/cors.json\n  networks:\n    - shared-network\n  depends_on:\n    - minio\n  restart: always\n</code></pre>"},{"location":"services/minio_client/#points-cles","title":"Points Cl\u00e9s","text":"<ul> <li>D\u00e9pendance : D\u00e9pend du service MinIO.</li> <li>Volumes : Monte le fichier <code>cors.json</code> pour la gestion des CORS.</li> </ul>"},{"location":"services/minio_client/#dockerfile","title":"Dockerfile","text":"<p>Le <code>Dockerfile</code> dans le r\u00e9pertoire <code>minio-client</code> configure l'image du client MinIO.</p>"},{"location":"services/minio_client/#exemple-de-dockerfile","title":"Exemple de Dockerfile","text":"<pre><code>FROM python:3.9-slim\n\n# Installer mc (MinIO Client)\nRUN apt-get update &amp;&amp; \\\n    apt-get install -y wget &amp;&amp; \\\n    wget https://dl.min.io/client/mc/release/linux-amd64/mc -O /usr/local/bin/mc &amp;&amp; \\\n    chmod +x /usr/local/bin/mc\n\n# Installer les d\u00e9pendances Python\nCOPY requirements.txt /app/requirements.txt\nRUN pip install --no-cache-dir -r /app/requirements.txt\n\n# Copier les scripts\nCOPY bucket_upload.py /app/bucket_upload.py\n\n# D\u00e9finir le r\u00e9pertoire de travail\nWORKDIR /app\n\n# Entrypoint\nCOPY entrypoint.sh /app/entrypoint.sh\nRUN chmod +x /app/entrypoint.sh\nENTRYPOINT [\"/app/entrypoint.sh\"]\n</code></pre>"},{"location":"services/minio_client/#exemple-de-entrypointsh","title":"Exemple de <code>entrypoint.sh</code>","text":"<pre><code>#!/bin/bash\nset -e\n\n# Configurer mc avec les informations d'environnement\nmc alias set myminio ${MINIO_ENDPOINT} ${MINIO_ROOT_USER} ${MINIO_ROOT_PASSWORD}\n\n# Ex\u00e9cuter le script Python\npython bucket_upload.py\n</code></pre>"},{"location":"services/minio_client/#exemple-de-bucket_uploadpy","title":"Exemple de <code>bucket_upload.py</code>","text":"<pre><code>import os\nimport json\nfrom minio import Minio\nfrom minio.error import S3Error\n\ndef upload_bucket_configuration():\n    minio_endpoint = os.getenv('MINIO_ENDPOINT')\n    access_key = os.getenv('MINIO_ROOT_USER')\n    secret_key = os.getenv('MINIO_ROOT_PASSWORD')\n\n    client = Minio(\n        minio_endpoint,\n        access_key=access_key,\n        secret_key=secret_key,\n        secure=False\n    )\n\n    # Charger la configuration CORS\n    with open('cors.json') as f:\n        cors_config = json.load(f)\n\n    # Appliquer la configuration CORS au bucket\n    client.set_bucket_cors('your-bucket-name', cors_config)\n\nif __name__ == \"__main__\":\n    try:\n        upload_bucket_configuration()\n        print(\"Configuration CORS appliqu\u00e9e avec succ\u00e8s.\")\n    except S3Error as e:\n        print(f\"Erreur lors de l'application de la configuration CORS : {e}\")\n</code></pre>"},{"location":"services/minio_client/#utilisation","title":"Utilisation","text":"<ol> <li>Construction de l'Image Docker</li> </ol> <p><code>bash    docker-compose build minio-client</code></p> <ol> <li>D\u00e9marrage du Service</li> </ol> <p><code>bash    docker-compose up -d minio-client</code></p> <ol> <li>Ex\u00e9cution des Scripts</li> </ol> <p>Le conteneur <code>minio-client</code> ex\u00e9cutera automatiquement le script <code>bucket_upload.py</code> lors du d\u00e9marrage pour configurer les CORS.</p>"},{"location":"services/minio_client/#securite","title":"S\u00e9curit\u00e9","text":"<ul> <li>Mots de Passe Forts : Utilisez des mots de passe complexes pour <code>MINIO_ROOT_USER</code> et <code>MINIO_ROOT_PASSWORD</code>.</li> <li>Acc\u00e8s Restreint : Limitez les permissions du client MinIO uniquement aux op\u00e9rations n\u00e9cessaires.</li> </ul>"},{"location":"services/minio_client/#surveillance","title":"Surveillance","text":"<p>Int\u00e9grez le client MinIO avec Prometheus pour surveiller les m\u00e9triques d'interaction avec le serveur MinIO.</p> <p>```</p>"},{"location":"services/mlflow/","title":"MLflow","text":""},{"location":"services/mlflow/#description","title":"Description","text":"<p>MLflow est utilis\u00e9 pour la gestion du cycle de vie des mod\u00e8les de machine learning, incluant le suivi des exp\u00e9riences, la gestion des mod\u00e8les et le d\u00e9ploiement.</p>"},{"location":"services/mlflow/#configuration","title":"Configuration","text":""},{"location":"services/mlflow/#definition-du-service-dans-docker-composeyml","title":"D\u00e9finition du Service dans <code>docker-compose.yml</code>","text":"<pre><code>mlflow:\n  container_name: mlflow\n  build:\n    context: ./mlflow\n    dockerfile: Dockerfile\n  env_file:\n    - .env\n  environment:\n    - MLFLOW_BACKEND_STORE_URI=${MLFLOW_BACKEND_STORE_URI}\n    - MLFLOW_ARTIFACT_ROOT=${MLFLOW_ARTIFACT_ROOT}\n    - MLFLOW_S3_ENDPOINT_URL=${MLFLOW_S3_ENDPOINT_URL}\n    - AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}\n    - AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}\n  ports:\n    - \"${MLFLOW_PORT}:${MLFLOW_PORT}\"\n  volumes:\n    - ./mlflow:/mlflow\n  labels:\n    - \"traefik.enable=true\"\n    - \"traefik.http.routers.mlflow.rule=Host(`mlflow.domaine.com`)\"\n    - \"traefik.http.routers.mlflow.entrypoints=websecure\"\n    - \"traefik.http.routers.mlflow.tls.certresolver=cloudflare\"\n    - \"traefik.http.routers.mlflow.middlewares=authelia@docker,secureHeaders@docker\"\n  networks:\n    - shared-network\n  restart: always\n</code></pre>"},{"location":"services/mlflow/#points-cles","title":"Points Cl\u00e9s","text":"<ul> <li>Interface Web : Accessible via <code>mlflow.domaine.com</code>.</li> <li>Stockage des Artefacts : Utilise MinIO comme backend de stockage compatible S3.</li> <li>S\u00e9curit\u00e9 : Gestion des certificats TLS et des middlewares via Traefik.</li> <li>Volumes : Les donn\u00e9es MLflow sont persist\u00e9es dans <code>mlflow-data</code>.</li> </ul>"},{"location":"services/mlflow/#dockerfile","title":"Dockerfile","text":"<p>Le <code>Dockerfile</code> dans le r\u00e9pertoire <code>mlflow</code> configure l'image MLflow.</p>"},{"location":"services/mlflow/#exemple-de-dockerfile","title":"Exemple de Dockerfile","text":"<pre><code>FROM python:3.9-slim\n\n# Installer les d\u00e9pendances\nRUN apt-get update &amp;&amp; \\\n    apt-get install -y build-essential &amp;&amp; \\\n    pip install --no-cache-dir mlflow boto3\n\n# Copier les scripts et configurations\nCOPY entrypoint.sh /app/entrypoint.sh\nCOPY create_bucket.py /app/create_bucket.py\n\n# D\u00e9finir le r\u00e9pertoire de travail\nWORKDIR /app\n\n# Entrypoint\nRUN chmod +x /app/entrypoint.sh\nENTRYPOINT [\"/app/entrypoint.sh\"]\n</code></pre>"},{"location":"services/mlflow/#exemple-de-entrypointsh","title":"Exemple de <code>entrypoint.sh</code>","text":"<pre><code>#!/bin/bash\nset -e\n\n# Attendre que PostgreSQL soit pr\u00eat\n./wait-for-it.sh postgre:5432 -- echo \"PostgreSQL is up\"\n\n# Lancer MLflow\nmlflow server \\\n  --backend-store-uri ${MLFLOW_BACKEND_STORE_URI} \\\n  --default-artifact-root ${MLFLOW_ARTIFACT_ROOT} \\\n  --host 0.0.0.0 \\\n  --port ${MLFLOW_PORT}\n</code></pre>"},{"location":"services/mlflow/#utilisation","title":"Utilisation","text":"<ol> <li>Construction de l'Image Docker</li> </ol> <p><code>bash    docker-compose build mlflow</code></p> <ol> <li>D\u00e9marrage du Service</li> </ol> <p><code>bash    docker-compose up -d mlflow</code></p> <ol> <li>Acc\u00e9der \u00e0 l'Interface Web</li> </ol> <p>Ouvrez votre navigateur et naviguez vers https://mlflow.domaine.com.</p>"},{"location":"services/mlflow/#securite","title":"S\u00e9curit\u00e9","text":"<ul> <li>Mots de Passe Forts : Utilisez des mots de passe complexes pour les acc\u00e8s AWS (MinIO).</li> <li>Chiffrement : Activez le chiffrement des donn\u00e9es au repos et en transit si n\u00e9cessaire.</li> <li>Contr\u00f4le d'Acc\u00e8s : Configurez des politiques d'acc\u00e8s pour limiter les permissions aux utilisateurs et services.</li> </ul>"},{"location":"services/mlflow/#sauvegarde-et-restauration","title":"Sauvegarde et Restauration","text":""},{"location":"services/mlflow/#sauvegarde","title":"Sauvegarde","text":"<p>Les artefacts MLflow sont stock\u00e9s dans MinIO. Utilisez le client MinIO pour sauvegarder les artefacts.</p> <pre><code>docker exec -it minio-client mc mirror minio/mlflow/artifacts /path/to/backup\n</code></pre>"},{"location":"services/mlflow/#restauration","title":"Restauration","text":"<p>Pour restaurer les artefacts, utilisez la commande suivante :</p> <pre><code>docker exec -it minio-client mc mirror /path/to/backup minio/mlflow/artifacts\n</code></pre>"},{"location":"services/mlflow/#monitoring","title":"Monitoring","text":"<p>Int\u00e9grez MLflow avec Prometheus pour surveiller les m\u00e9triques de suivi des exp\u00e9riences et des mod\u00e8les. Configurez les exporters n\u00e9cessaires dans <code>prometheus.yml</code>.</p>"},{"location":"services/neo4j/","title":"Neo4j","text":""},{"location":"services/neo4j/#description","title":"Description","text":"<p>Neo4j est utilis\u00e9 comme base de donn\u00e9es graph pour g\u00e9rer les relations complexes entre les donn\u00e9es. Il permet de mod\u00e9liser et de requ\u00eater des graphes de donn\u00e9es de mani\u00e8re efficace.</p>"},{"location":"services/neo4j/#configuration","title":"Configuration","text":""},{"location":"services/neo4j/#definition-du-service-dans-docker-composeyml","title":"D\u00e9finition du Service dans <code>docker-compose.yml</code>","text":"<pre><code>neo4j:\n  image: neo4j:latest\n  container_name: neo4j\n  ports:\n    - \"7474:7474\"  # Interface web Neo4j\n    - \"7687:7687\"  # Protocole Bolt\n  environment:\n    - NEO4J_AUTH=${NEO4J_AUTH}\n    - NEO4J_PLUGINS=[\"apoc\"]\n  volumes:\n    - neo4j_data:/data\n    - neo4j_logs:/logs\n  labels:\n    - \"traefik.enable=true\"\n    - \"traefik.http.routers.neo4j.rule=Host(`neo4j.domaine.com`)\"\n    - \"traefik.http.routers.neo4j.entrypoints=websecure\"\n    - \"traefik.http.routers.neo4j.tls.certresolver=cloudflare\"\n    - \"traefik.http.routers.neo4j.middlewares=authelia@docker,secureHeaders@docker\"\n    - \"traefik.http.services.neo4j.loadbalancer.server.port=7474\"  # Correction effectu\u00e9e\n  networks:\n    - shared-network\n  restart: unless-stopped\n</code></pre>"},{"location":"services/neo4j/#points-cles","title":"Points Cl\u00e9s","text":"<ul> <li>Interface Web : Accessible via <code>neo4j.domaine.com</code>.</li> <li>S\u00e9curit\u00e9 : Utilisation de Traefik pour g\u00e9rer les certificats TLS et les middlewares de s\u00e9curit\u00e9.</li> <li>Plugins : Le plugin <code>apoc</code> est install\u00e9 pour \u00e9tendre les fonctionnalit\u00e9s de Neo4j.</li> <li>Volumes : Les donn\u00e9es et les logs sont persist\u00e9s dans <code>neo4j_data</code> et <code>neo4j_logs</code> respectivement.</li> </ul>"},{"location":"services/neo4j/#installation-des-plugins","title":"Installation des Plugins","text":"<p>Le plugin <code>apoc</code> est un ensemble d'outils pour Neo4j qui fournit des proc\u00e9dures et des fonctions suppl\u00e9mentaires. Assurez-vous qu'il est correctement install\u00e9 et configur\u00e9.</p>"},{"location":"services/neo4j/#configuration-des-plugins","title":"Configuration des Plugins","text":"<ol> <li>T\u00e9l\u00e9charger le Plugin <code>apoc</code></li> </ol> <p>T\u00e9l\u00e9chargez la derni\u00e8re version d'<code>apoc</code> depuis GitHub et placez-le dans le r\u00e9pertoire des plugins de Neo4j.</p> <ol> <li>Configurer Neo4j pour Charger les Plugins</li> </ol> <p>Ajoutez les configurations suivantes dans le fichier <code>neo4j.conf</code> si n\u00e9cessaire :</p> <p><code>ini    dbms.security.procedures.unrestricted=apoc.*    dbms.security.procedures.allowlist=apoc.*</code></p>"},{"location":"services/neo4j/#utilisation","title":"Utilisation","text":"<ol> <li>Acc\u00e9der \u00e0 l'Interface Web</li> </ol> <p>Ouvrez votre navigateur et naviguez vers https://neo4j.domaine.com. Connectez-vous avec les identifiants d\u00e9finis dans le fichier <code>.env</code>.</p> <ol> <li>Interagir avec la Base de Donn\u00e9es</li> </ol> <p>Utilisez l'interface web ou les outils comme <code>cypher-shell</code> pour ex\u00e9cuter des requ\u00eates Cypher et g\u00e9rer vos graphes de donn\u00e9es.</p>"},{"location":"services/neo4j/#securite","title":"S\u00e9curit\u00e9","text":"<ul> <li>Mots de Passe Forts : Utilisez des mots de passe complexes pour <code>NEO4J_AUTH</code>.</li> <li>Acc\u00e8s Restreint : Limitez l'acc\u00e8s \u00e0 Neo4j uniquement aux services qui en ont besoin via le r\u00e9seau Docker.</li> </ul>"},{"location":"services/neo4j/#sauvegarde-et-restauration","title":"Sauvegarde et Restauration","text":""},{"location":"services/neo4j/#sauvegarde","title":"Sauvegarde","text":"<p>Utilisez les outils int\u00e9gr\u00e9s de Neo4j pour cr\u00e9er des snapshots r\u00e9guliers de la base de donn\u00e9es.</p> <pre><code>docker exec -it neo4j bin/neo4j-admin dump --database=neo4j --to=/data/neo4j.dump\ndocker cp neo4j:/data/neo4j.dump ./backup/neo4j.dump\n</code></pre>"},{"location":"services/neo4j/#restauration","title":"Restauration","text":"<p>Pour restaurer une sauvegarde, utilisez la commande suivante :</p> <pre><code>docker exec -it neo4j bin/neo4j-admin load --database=neo4j --from=/data/neo4j.dump --force\n</code></pre>"},{"location":"services/neo4j/#monitoring","title":"Monitoring","text":"<p>Int\u00e9grez Neo4j avec Prometheus pour surveiller les m\u00e9triques de la base de donn\u00e9es. Configurez les exporters n\u00e9cessaires dans <code>prometheus.yml</code>.</p> <p>```</p>"},{"location":"services/postgresql/","title":"PostgreSQL","text":""},{"location":"services/postgresql/#description","title":"Description","text":"<p>PostgreSQL est utilis\u00e9 comme base de donn\u00e9es relationnelle pour stocker les donn\u00e9es de votre application.</p>"},{"location":"services/postgresql/#configuration","title":"Configuration","text":""},{"location":"services/postgresql/#definition-du-service-dans-docker-composeyml","title":"D\u00e9finition du Service dans <code>docker-compose.yml</code>","text":"<pre><code>postgre:\n  container_name: postgre\n  build:\n    context: ./postgre\n    dockerfile: Dockerfile\n    args:\n      PG_MAJOR: ${PG_MAJOR}\n  env_file:\n    - .env\n  environment:\n    - POSTGRES_USER=${POSTGRE_USER}\n    - POSTGRES_PASSWORD=${POSTGRE_PASSWORD}\n    - POSTGRES_DB=${POSTGRE_DB}\n  ports:\n    - \"${POSTGRE_PORT}:${POSTGRE_PORT}\"\n  volumes:\n    - postgre-data:/var/lib/postgresql/data\n  networks:\n    - shared-network\n  restart: always\n</code></pre>"},{"location":"services/postgresql/#points-cles","title":"Points Cl\u00e9s","text":"<ul> <li>Volumes : Les donn\u00e9es sont persist\u00e9es dans <code>postgre-data</code>.</li> <li>Ports : Par d\u00e9faut, PostgreSQL utilise le port <code>5432</code>.</li> <li>Variables d'Environnement : D\u00e9finies dans le fichier <code>.env</code>.</li> </ul>"},{"location":"services/postgresql/#scripts-dinitialisation","title":"Scripts d'Initialisation","text":"<p>Les scripts <code>init_db.pgsql.template</code> et <code>init_db.sql.template</code> sont utilis\u00e9s pour initialiser la base de donn\u00e9es lors du premier d\u00e9marrage.</p>"},{"location":"services/postgresql/#dockerfile","title":"Dockerfile","text":"<p>Le <code>Dockerfile</code> dans le r\u00e9pertoire <code>postgre</code> configure l'image PostgreSQL, y compris l'installation de <code>pgvector</code> via <code>install_pgvector.sh</code>.</p>"},{"location":"services/postgresql/#exemple-de-dockerfile","title":"Exemple de Dockerfile","text":"<pre><code>FROM postgres:${PG_MAJOR}\n\n# Installation de pgvector\nCOPY install_pgvector.sh /docker-entrypoint-initdb.d/\nRUN chmod +x /docker-entrypoint-initdb.d/install_pgvector.sh\n</code></pre>"},{"location":"services/postgresql/#exemple-de-install_pgvectorsh","title":"Exemple de <code>install_pgvector.sh</code>","text":"<pre><code>#!/bin/bash\nset -e\n\n# Installer les d\u00e9pendances n\u00e9cessaires\napt-get update\napt-get install -y postgresql-server-dev-all git build-essential\n\n# Cloner et installer pgvector\ngit clone https://github.com/pgvector/pgvector.git\ncd pgvector\nmake &amp;&amp; make install\n\n# Nettoyage\ncd ..\nrm -rf pgvector\napt-get remove -y git build-essential\napt-get autoremove -y\napt-get clean\n</code></pre>"},{"location":"services/postgresql/#utilisation","title":"Utilisation","text":"<ol> <li>Construction de l'Image Docker</li> </ol> <p><code>bash    docker-compose build postgre</code></p> <ol> <li>D\u00e9marrage du Service</li> </ol> <p><code>bash    docker-compose up -d postgre</code></p> <ol> <li>V\u00e9rification du Fonctionnement</li> </ol> <p>Acc\u00e9dez \u00e0 PostgreSQL via le port d\u00e9fini (par exemple, <code>5432</code>) et v\u00e9rifiez les bases de donn\u00e9es et les tables cr\u00e9\u00e9es.</p>"},{"location":"services/postgresql/#securite","title":"S\u00e9curit\u00e9","text":"<ul> <li>Mots de Passe Forts : Utilisez des mots de passe complexes pour <code>POSTGRES_USER</code> et <code>POSTGRES_PASSWORD</code>.</li> <li>Acc\u00e8s Limit\u00e9 : Limitez l'acc\u00e8s \u00e0 PostgreSQL uniquement aux services qui en ont besoin via le r\u00e9seau Docker.</li> </ul>"},{"location":"services/postgresql/#sauvegarde-et-restauration","title":"Sauvegarde et Restauration","text":""},{"location":"services/postgresql/#sauvegarde","title":"Sauvegarde","text":"<p>Utilisez <code>pg_dump</code> pour effectuer des sauvegardes r\u00e9guli\u00e8res de la base de donn\u00e9es.</p> <pre><code>docker exec -t postgre pg_dumpall -c -U your_username &gt; backup.sql\n</code></pre>"},{"location":"services/postgresql/#restauration","title":"Restauration","text":"<p>Pour restaurer une sauvegarde, utilisez la commande suivante :</p> <pre><code>docker exec -i postgre psql -U your_username -d your_database &lt; backup.sql\n</code></pre>"},{"location":"services/postgresql/#monitoring","title":"Monitoring","text":"<p>Int\u00e9grez PostgreSQL avec Prometheus pour surveiller les m\u00e9triques de la base de donn\u00e9es. Configurez les exporters n\u00e9cessaires dans <code>prometheus.yml</code>.</p>"},{"location":"services/prometheus/","title":"Prometheus","text":""},{"location":"services/prometheus/#description","title":"Description","text":"<p>Prometheus est utilis\u00e9 pour la surveillance des m\u00e9triques de vos services Dockeris\u00e9s. Il collecte des donn\u00e9es de performance et de sant\u00e9, permettant une analyse et une alerte en temps r\u00e9el.</p>"},{"location":"services/prometheus/#configuration","title":"Configuration","text":""},{"location":"services/prometheus/#definition-du-service-dans-docker-composeyml","title":"D\u00e9finition du Service dans <code>docker-compose.yml</code>","text":"<pre><code>prometheus:\n  image: prom/prometheus:latest\n  container_name: prometheus\n  volumes:\n    - ./metrics/prometheus.yml:/etc/prometheus/prometheus.yml\n  ports:\n    - \"9090:9090\"\n  extra_hosts:\n    - \"host.docker.internal:host-gateway\"\n  networks:\n    - shared-network\n  restart: always\n  labels:\n    - \"traefik.enable=true\"\n    - \"traefik.http.routers.prometheus.rule=Host(`prometheus.domaine.com`)\"\n    - \"traefik.http.routers.prometheus.entrypoints=websecure\"\n    - \"traefik.http.routers.prometheus.tls.certresolver=cloudflare\"\n    - \"traefik.http.routers.prometheus.middlewares=authelia@docker,secureHeaders@docker\"\n</code></pre>"},{"location":"services/prometheus/#points-cles","title":"Points Cl\u00e9s","text":"<ul> <li>Interface Web : Accessible via <code>prometheus.domaine.com</code>.</li> <li>Configuration : Utilise <code>prometheus.yml</code> pour d\u00e9finir les cibles de surveillance.</li> <li>S\u00e9curit\u00e9 : Utilisation de Traefik pour g\u00e9rer les certificats TLS et les middlewares de s\u00e9curit\u00e9.</li> </ul>"},{"location":"services/prometheus/#fichier-de-configuration-prometheusyml","title":"Fichier de Configuration <code>prometheus.yml</code>","text":"<pre><code>global:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: 'docker'\n    static_configs:\n      - targets: ['postgre:5432', 'minio:9000', 'neo4j:7474', 'mlflow:5000', 'label-studio:8080', 'grafana:3001']\n</code></pre>"},{"location":"services/prometheus/#utilisation","title":"Utilisation","text":"<ol> <li>Construction de l'Image Docker</li> </ol> <p><code>bash    docker-compose build prometheus</code></p> <ol> <li>D\u00e9marrage du Service</li> </ol> <p><code>bash    docker-compose up -d prometheus</code></p> <ol> <li>Acc\u00e9der \u00e0 l'Interface Web</li> </ol> <p>Ouvrez votre navigateur et naviguez vers https://prometheus.domaine.com.</p>"},{"location":"services/prometheus/#securite","title":"S\u00e9curit\u00e9","text":"<ul> <li>Mots de Passe Forts : Si des acc\u00e8s administratifs sont configur\u00e9s, utilisez des mots de passe complexes.</li> <li>Acc\u00e8s Restreint : Limitez l'acc\u00e8s \u00e0 Prometheus uniquement aux services qui en ont besoin via le r\u00e9seau Docker.</li> </ul>"},{"location":"services/prometheus/#sauvegarde-et-restauration","title":"Sauvegarde et Restauration","text":""},{"location":"services/prometheus/#sauvegarde","title":"Sauvegarde","text":"<p>Sauvegardez le fichier de configuration <code>prometheus.yml</code> et les donn\u00e9es de Prometheus si n\u00e9cessaire.</p> <pre><code>docker cp prometheus:/etc/prometheus/prometheus.yml ./backup/prometheus.yml\n</code></pre>"},{"location":"services/prometheus/#restauration","title":"Restauration","text":"<p>Pour restaurer la configuration, copiez le fichier sauvegard\u00e9 dans le conteneur.</p> <pre><code>docker cp ./backup/prometheus.yml prometheus:/etc/prometheus/prometheus.yml\ndocker restart prometheus\n</code></pre>"},{"location":"services/prometheus/#monitoring","title":"Monitoring","text":"<p>Prometheus collecte des m\u00e9triques de tous les services d\u00e9finis dans <code>prometheus.yml</code>. Assurez-vous que chaque service expose les m\u00e9triques n\u00e9cessaires via des endpoints compatibles.</p>"},{"location":"services/prometheus/#alertes","title":"Alertes","text":"<p>Configurez des r\u00e8gles d'alerte dans <code>alert_rules.yml</code> pour \u00eatre inform\u00e9 des anomalies ou des d\u00e9faillances.</p>"},{"location":"services/prometheus/#exemple-dalerte-dans-alert_rulesyml","title":"Exemple d'Alerte dans <code>alert_rules.yml</code>","text":"<pre><code>groups:\n  - name: example\n    rules:\n      - alert: HighCPUUsage\n        expr: process_cpu_seconds_total &gt; 0.8\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High CPU usage detected\"\n          description: \"CPU usage has been above 80% for more than 5 minutes.\"\n</code></pre>"},{"location":"services/prometheus/#integration-avec-grafana","title":"Int\u00e9gration avec Grafana","text":"<p>Connectez Prometheus \u00e0 Grafana pour visualiser les m\u00e9triques collect\u00e9es. Configurez les dashboards n\u00e9cessaires dans Grafana pour suivre les indicateurs cl\u00e9s.</p>"}]}